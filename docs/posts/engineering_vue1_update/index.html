<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Vue1.0+Webpack1+Gulpé¡¹ç›®å‡çº§æ„å»ºæ–¹æ¡ˆçš„è¸©å‘è·¯ | GeekHouse | ä¸è‚¥çš„è‚¥ç¾Š</title>
<meta name=keywords content="Engineering">
<meta name=description content="æœ€è¿‘åŠå¹´åœ¨ç»´æŠ¤å…¬å¸çš„ä¸€ä¸ªç®¡ç†åå°é¡¹ç›®ï¼Œæ­å»ºä¹‹åˆçš„æŠ€æœ¯æ ˆæ¯”è¾ƒæ··ä¹±ï¼Œæ„å»ºæ–¹æ¡ˆé‡‡ç”¨äº†Gulpä¸­è°ƒç”¨Webpackçš„æ–¹å¼ï¼ŒGulpè´Ÿè´£å¤„ç†.htmlæ–‡ä»¶ï¼ŒWebpackè´Ÿè´£åŠ è½½.vueã€.jsç­‰ã€‚è€Œåœ¨è¿™ä¸€å¥—æ„å»ºæ–¹æ¡ˆä¸­ï¼Œä¸»è¦æœ‰è¿™äº›é—®é¢˜ï¼š
 æ²¡æœ‰å®ç°JSå‹ç¼©ã€CSSå…¼å®¹ç­‰åŠŸèƒ½ã€‚ åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¿å­˜ä»£ç ï¼Œé¡¹ç›®ä¼šè¿›è¡Œå®Œå…¨çš„é‡æ–°æ‰“åŒ…ï¼ŒæŒç»­æ„å»ºé€Ÿåº¦ä¸ä»…ç¼“æ…¢ï¼Œè¿˜ä¼šäº§ç”Ÿç¼“å­˜çš„ç°è±¡ï¼ˆæ„å»ºå®Œæˆååˆ·æ–°é¡µé¢æ”¹åŠ¨ä¸ç”Ÿæ•ˆï¼‰ã€‚ ç”±äºç›®å‰çš„æ–¹æ¡ˆæ²¡æœ‰ä½¿ç”¨http-proxy-middlewareè¿™æ ·çš„è¯·æ±‚ä»£ç†æ¨¡å—ï¼Œå¯¼è‡´é¡¹ç›®åœ¨æœ¬åœ°å¼€å‘æ—¶è¿˜è¦éƒ¨ç½²åç«¯æœåŠ¡ï¼Œå¯¹æ–°æ¥æ‰‹çš„å¼€å‘è€…ä¸å‹å¥½ï¼Œè€Œä¸”ç»å¸¸ç”±äºæ²Ÿé€šä¸åŠæ—¶äº§ç”Ÿæµ‹è¯•ç¯å¢ƒä¸æœ¬åœ°ç¯å¢ƒçš„ä»£ç åŒæ­¥é—®é¢˜ã€‚  å› æ­¤ï¼Œåœ¨ç†Ÿæ‚‰è¿™ä¸ªé¡¹ç›®ä¹‹åï¼Œæ‰“ç®—å¯¹å…¶æ„å»ºæ–¹æ¡ˆè¿›è¡Œå‡çº§ï¼Œä¸»è¦ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚
1. åŸæœ‰æ„å»ºæ–¹æ¡ˆæè¿° åŸæœ‰æ„å»ºé€Ÿåº¦  npm run buildï¼šæ‰“åŒ…çº¦50s npm run devï¼šå¼€å¯å¼€å‘æ¨¡å¼çº¦50sï¼Œä¿å­˜è‡ªåŠ¨é‡æ–°ç¼–è¯‘éœ€çº¦6sï¼Œç¼–è¯‘å®Œæˆåéœ€è¦åˆ·æ–°æ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œå¶å°”å› ç¼“å­˜é—®é¢˜éœ€è¦å†æ¬¡è‡ªåŠ¨é‡æ–°ç¼–è¯‘æ‰èƒ½çœ‹åˆ°æ•ˆæœ  åŸæœ‰æ„å»ºç»“æœ  ./build/developmentï¼šå­˜æ”¾æ¸²æŸ“åçš„jsæ–‡ä»¶ ./build/htmlï¼šå­˜æ”¾æ¸²æŸ“åçš„htmlæ–‡ä»¶ ./build/revï¼šä¿å­˜å„ä¸ªå…¥å£æ–‡ä»¶hashå€¼çš„jsonæ–‡ä»¶  æ‰“åŒ…ä»£ç è§£æ /** * ä½¿ç”¨gulp-cleanæ’ä»¶åˆ é™¤buildç›®å½•ä¸‹çš„æ–‡ä»¶ */ gulp.task('clean', function () { if (!stopClean) { return gulp.src('build/' + directory, { read: false }).pipe(clean()) } }) /** * ä½¿ç”¨webpackæ‰“åŒ…vueä¸jsæ–‡ä»¶ï¼Œåœ¨cleanä¹‹åè¿›è¡Œ */ gulp.task('webpack', ['clean'], function (callback) { deCompiler.run(function (err, stats) { if (err) throw new gutil.PluginError('webpack', err) gutil.log('[webpack]', stats.toString({})) callback() }) }) /** * ä½¿ç”¨gulp-uglifyæ’ä»¶å¯¹jsæ–‡ä»¶è¿›è¡Œä¸‘åŒ–ï¼Œåœ¨webpackä¹‹åè¿›è¡Œ */ gulp.">
<meta name=author content="YYJ">
<link rel=canonical href=https://geekhouse.top/posts/engineering_vue1_update/>
<meta name=google-site-verification content="1QAB7GLKqHCDECvfwM-cD5bZpswitnFWJxBpemz02Ok">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.83c4eb6d61e6a4176992e4a4ce8786fc30bd40032ba8663ec5d11e285a965766.css integrity="sha256-g8TrbWHmpBdpkuSkzoeG/DC9QAMrqGY+xdEeKFqWV2Y=" rel="preload stylesheet" as=style>
<link rel=icon href=https://geekhouse.top/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=16x16 href=https://geekhouse.top/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=https://geekhouse.top/%3Clink%20/%20abs%20url%3E>
<link rel=apple-touch-icon href=https://geekhouse.top/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://geekhouse.top/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script>(function(b,m,l,n,e,d,i,g,k,a,j,h,c,f){d="precollect",i="getAttribute",g="addEventListener",k="PerformanceObserver",a=function(b){j=[].slice.call(arguments),j.push(Date.now(),location.href),(b==d?a.p.a:a.q).push(j)},a.q=[],a.p={a:[]},b[e]=a,h=document.createElement("script"),h.src=l+"?aid="+n+"&globalName="+e,h.crossorigin="anonymous",m.getElementsByTagName("head")[0].appendChild(h),g in b&&(a.pcErr=function(a){a=a||b.event,c=a.target||a.srcElement,c instanceof Element||c instanceof HTMLElement?b[e](d,"st",{tagName:c.tagName,url:c[i]("href")||c[i]("src")}):b[e](d,"err",a.error||a.message)},a.pcRej=function(a){a=a||b.event,b[e](d,"err",a.reason||a.detail&&a.detail.reason)},b[g]("error",a.pcErr,!0),b[g]("unhandledrejection",a.pcRej,!0)),"PerformanceLongTaskTiming"in b&&(f=a.pp={entries:[]},f.observer=new PerformanceObserver(function(a){f.entries=f.entries.concat(a.getEntries())}),f.observer.observe({entryTypes:["longtask","largest-contentful-paint","layout-shift"]}))})(window,document,"https://apm.volccdn.com/mars-web/apmplus/web/browser.cn.js",0,"apmPlus")</script>
<script>window.apmPlus("init",{aid:370306,userId:"è¯·å¡«å†™userId",env:"è¯·å¡«å†™env",release:"è¯·å¡«å†™release",plugins:{jsError:!0,breadcrumb:!0,resource:!0,resourceError:!0,performance:!0,blankScreen:!0,pageview:{routeMode:"hash"}}}),window.apmPlus("start")</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-184187677-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="Vue1.0+Webpack1+Gulpé¡¹ç›®å‡çº§æ„å»ºæ–¹æ¡ˆçš„è¸©å‘è·¯">
<meta property="og:description" content="æœ€è¿‘åŠå¹´åœ¨ç»´æŠ¤å…¬å¸çš„ä¸€ä¸ªç®¡ç†åå°é¡¹ç›®ï¼Œæ­å»ºä¹‹åˆçš„æŠ€æœ¯æ ˆæ¯”è¾ƒæ··ä¹±ï¼Œæ„å»ºæ–¹æ¡ˆé‡‡ç”¨äº†Gulpä¸­è°ƒç”¨Webpackçš„æ–¹å¼ï¼ŒGulpè´Ÿè´£å¤„ç†.htmlæ–‡ä»¶ï¼ŒWebpackè´Ÿè´£åŠ è½½.vueã€.jsç­‰ã€‚è€Œåœ¨è¿™ä¸€å¥—æ„å»ºæ–¹æ¡ˆä¸­ï¼Œä¸»è¦æœ‰è¿™äº›é—®é¢˜ï¼š
 æ²¡æœ‰å®ç°JSå‹ç¼©ã€CSSå…¼å®¹ç­‰åŠŸèƒ½ã€‚ åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¿å­˜ä»£ç ï¼Œé¡¹ç›®ä¼šè¿›è¡Œå®Œå…¨çš„é‡æ–°æ‰“åŒ…ï¼ŒæŒç»­æ„å»ºé€Ÿåº¦ä¸ä»…ç¼“æ…¢ï¼Œè¿˜ä¼šäº§ç”Ÿç¼“å­˜çš„ç°è±¡ï¼ˆæ„å»ºå®Œæˆååˆ·æ–°é¡µé¢æ”¹åŠ¨ä¸ç”Ÿæ•ˆï¼‰ã€‚ ç”±äºç›®å‰çš„æ–¹æ¡ˆæ²¡æœ‰ä½¿ç”¨http-proxy-middlewareè¿™æ ·çš„è¯·æ±‚ä»£ç†æ¨¡å—ï¼Œå¯¼è‡´é¡¹ç›®åœ¨æœ¬åœ°å¼€å‘æ—¶è¿˜è¦éƒ¨ç½²åç«¯æœåŠ¡ï¼Œå¯¹æ–°æ¥æ‰‹çš„å¼€å‘è€…ä¸å‹å¥½ï¼Œè€Œä¸”ç»å¸¸ç”±äºæ²Ÿé€šä¸åŠæ—¶äº§ç”Ÿæµ‹è¯•ç¯å¢ƒä¸æœ¬åœ°ç¯å¢ƒçš„ä»£ç åŒæ­¥é—®é¢˜ã€‚  å› æ­¤ï¼Œåœ¨ç†Ÿæ‚‰è¿™ä¸ªé¡¹ç›®ä¹‹åï¼Œæ‰“ç®—å¯¹å…¶æ„å»ºæ–¹æ¡ˆè¿›è¡Œå‡çº§ï¼Œä¸»è¦ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚
1. åŸæœ‰æ„å»ºæ–¹æ¡ˆæè¿° åŸæœ‰æ„å»ºé€Ÿåº¦  npm run buildï¼šæ‰“åŒ…çº¦50s npm run devï¼šå¼€å¯å¼€å‘æ¨¡å¼çº¦50sï¼Œä¿å­˜è‡ªåŠ¨é‡æ–°ç¼–è¯‘éœ€çº¦6sï¼Œç¼–è¯‘å®Œæˆåéœ€è¦åˆ·æ–°æ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œå¶å°”å› ç¼“å­˜é—®é¢˜éœ€è¦å†æ¬¡è‡ªåŠ¨é‡æ–°ç¼–è¯‘æ‰èƒ½çœ‹åˆ°æ•ˆæœ  åŸæœ‰æ„å»ºç»“æœ  ./build/developmentï¼šå­˜æ”¾æ¸²æŸ“åçš„jsæ–‡ä»¶ ./build/htmlï¼šå­˜æ”¾æ¸²æŸ“åçš„htmlæ–‡ä»¶ ./build/revï¼šä¿å­˜å„ä¸ªå…¥å£æ–‡ä»¶hashå€¼çš„jsonæ–‡ä»¶  æ‰“åŒ…ä»£ç è§£æ /** * ä½¿ç”¨gulp-cleanæ’ä»¶åˆ é™¤buildç›®å½•ä¸‹çš„æ–‡ä»¶ */ gulp.task('clean', function () { if (!stopClean) { return gulp.src('build/' + directory, { read: false }).pipe(clean()) } }) /** * ä½¿ç”¨webpackæ‰“åŒ…vueä¸jsæ–‡ä»¶ï¼Œåœ¨cleanä¹‹åè¿›è¡Œ */ gulp.task('webpack', ['clean'], function (callback) { deCompiler.run(function (err, stats) { if (err) throw new gutil.PluginError('webpack', err) gutil.log('[webpack]', stats.toString({})) callback() }) }) /** * ä½¿ç”¨gulp-uglifyæ’ä»¶å¯¹jsæ–‡ä»¶è¿›è¡Œä¸‘åŒ–ï¼Œåœ¨webpackä¹‹åè¿›è¡Œ */ gulp.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://geekhouse.top/posts/engineering_vue1_update/"><meta property="og:image" content="https://geekhouse.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2019-04-04T00:00:00+00:00">
<meta property="article:modified_time" content="2019-04-04T00:00:00+00:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://geekhouse.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="Vue1.0+Webpack1+Gulpé¡¹ç›®å‡çº§æ„å»ºæ–¹æ¡ˆçš„è¸©å‘è·¯">
<meta name=twitter:description content="æœ€è¿‘åŠå¹´åœ¨ç»´æŠ¤å…¬å¸çš„ä¸€ä¸ªç®¡ç†åå°é¡¹ç›®ï¼Œæ­å»ºä¹‹åˆçš„æŠ€æœ¯æ ˆæ¯”è¾ƒæ··ä¹±ï¼Œæ„å»ºæ–¹æ¡ˆé‡‡ç”¨äº†Gulpä¸­è°ƒç”¨Webpackçš„æ–¹å¼ï¼ŒGulpè´Ÿè´£å¤„ç†.htmlæ–‡ä»¶ï¼ŒWebpackè´Ÿè´£åŠ è½½.vueã€.jsç­‰ã€‚è€Œåœ¨è¿™ä¸€å¥—æ„å»ºæ–¹æ¡ˆä¸­ï¼Œä¸»è¦æœ‰è¿™äº›é—®é¢˜ï¼š
 æ²¡æœ‰å®ç°JSå‹ç¼©ã€CSSå…¼å®¹ç­‰åŠŸèƒ½ã€‚ åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¿å­˜ä»£ç ï¼Œé¡¹ç›®ä¼šè¿›è¡Œå®Œå…¨çš„é‡æ–°æ‰“åŒ…ï¼ŒæŒç»­æ„å»ºé€Ÿåº¦ä¸ä»…ç¼“æ…¢ï¼Œè¿˜ä¼šäº§ç”Ÿç¼“å­˜çš„ç°è±¡ï¼ˆæ„å»ºå®Œæˆååˆ·æ–°é¡µé¢æ”¹åŠ¨ä¸ç”Ÿæ•ˆï¼‰ã€‚ ç”±äºç›®å‰çš„æ–¹æ¡ˆæ²¡æœ‰ä½¿ç”¨http-proxy-middlewareè¿™æ ·çš„è¯·æ±‚ä»£ç†æ¨¡å—ï¼Œå¯¼è‡´é¡¹ç›®åœ¨æœ¬åœ°å¼€å‘æ—¶è¿˜è¦éƒ¨ç½²åç«¯æœåŠ¡ï¼Œå¯¹æ–°æ¥æ‰‹çš„å¼€å‘è€…ä¸å‹å¥½ï¼Œè€Œä¸”ç»å¸¸ç”±äºæ²Ÿé€šä¸åŠæ—¶äº§ç”Ÿæµ‹è¯•ç¯å¢ƒä¸æœ¬åœ°ç¯å¢ƒçš„ä»£ç åŒæ­¥é—®é¢˜ã€‚  å› æ­¤ï¼Œåœ¨ç†Ÿæ‚‰è¿™ä¸ªé¡¹ç›®ä¹‹åï¼Œæ‰“ç®—å¯¹å…¶æ„å»ºæ–¹æ¡ˆè¿›è¡Œå‡çº§ï¼Œä¸»è¦ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚
1. åŸæœ‰æ„å»ºæ–¹æ¡ˆæè¿° åŸæœ‰æ„å»ºé€Ÿåº¦  npm run buildï¼šæ‰“åŒ…çº¦50s npm run devï¼šå¼€å¯å¼€å‘æ¨¡å¼çº¦50sï¼Œä¿å­˜è‡ªåŠ¨é‡æ–°ç¼–è¯‘éœ€çº¦6sï¼Œç¼–è¯‘å®Œæˆåéœ€è¦åˆ·æ–°æ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œå¶å°”å› ç¼“å­˜é—®é¢˜éœ€è¦å†æ¬¡è‡ªåŠ¨é‡æ–°ç¼–è¯‘æ‰èƒ½çœ‹åˆ°æ•ˆæœ  åŸæœ‰æ„å»ºç»“æœ  ./build/developmentï¼šå­˜æ”¾æ¸²æŸ“åçš„jsæ–‡ä»¶ ./build/htmlï¼šå­˜æ”¾æ¸²æŸ“åçš„htmlæ–‡ä»¶ ./build/revï¼šä¿å­˜å„ä¸ªå…¥å£æ–‡ä»¶hashå€¼çš„jsonæ–‡ä»¶  æ‰“åŒ…ä»£ç è§£æ /** * ä½¿ç”¨gulp-cleanæ’ä»¶åˆ é™¤buildç›®å½•ä¸‹çš„æ–‡ä»¶ */ gulp.task('clean', function () { if (!stopClean) { return gulp.src('build/' + directory, { read: false }).pipe(clean()) } }) /** * ä½¿ç”¨webpackæ‰“åŒ…vueä¸jsæ–‡ä»¶ï¼Œåœ¨cleanä¹‹åè¿›è¡Œ */ gulp.task('webpack', ['clean'], function (callback) { deCompiler.run(function (err, stats) { if (err) throw new gutil.PluginError('webpack', err) gutil.log('[webpack]', stats.toString({})) callback() }) }) /** * ä½¿ç”¨gulp-uglifyæ’ä»¶å¯¹jsæ–‡ä»¶è¿›è¡Œä¸‘åŒ–ï¼Œåœ¨webpackä¹‹åè¿›è¡Œ */ gulp.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://geekhouse.top/posts/"},{"@type":"ListItem","position":2,"name":"Vue1.0+Webpack1+Gulpé¡¹ç›®å‡çº§æ„å»ºæ–¹æ¡ˆçš„è¸©å‘è·¯","item":"https://geekhouse.top/posts/engineering_vue1_update/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Vue1.0+Webpack1+Gulpé¡¹ç›®å‡çº§æ„å»ºæ–¹æ¡ˆçš„è¸©å‘è·¯","name":"Vue1.0\u002bWebpack1\u002bGulpé¡¹ç›®å‡çº§æ„å»ºæ–¹æ¡ˆçš„è¸©å‘è·¯","description":"æœ€è¿‘åŠå¹´åœ¨ç»´æŠ¤å…¬å¸çš„ä¸€ä¸ªç®¡ç†åå°é¡¹ç›®ï¼Œæ­å»ºä¹‹åˆçš„æŠ€æœ¯æ ˆæ¯”è¾ƒæ··ä¹±ï¼Œæ„å»ºæ–¹æ¡ˆé‡‡ç”¨äº†Gulpä¸­è°ƒç”¨Webpackçš„æ–¹å¼ï¼ŒGulpè´Ÿè´£å¤„ç†.htmlæ–‡ä»¶ï¼ŒWebpackè´Ÿè´£åŠ è½½.vueã€.jsç­‰ã€‚è€Œåœ¨è¿™ä¸€å¥—æ„å»ºæ–¹æ¡ˆä¸­ï¼Œä¸»è¦æœ‰è¿™äº›é—®é¢˜ï¼š\n æ²¡æœ‰å®ç°JSå‹ç¼©ã€CSSå…¼å®¹ç­‰åŠŸèƒ½ã€‚ åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¿å­˜ä»£ç ï¼Œé¡¹ç›®ä¼šè¿›è¡Œå®Œå…¨çš„é‡æ–°æ‰“åŒ…ï¼ŒæŒç»­æ„å»ºé€Ÿåº¦ä¸ä»…ç¼“æ…¢ï¼Œè¿˜ä¼šäº§ç”Ÿç¼“å­˜çš„ç°è±¡ï¼ˆæ„å»ºå®Œæˆååˆ·æ–°é¡µé¢æ”¹åŠ¨ä¸ç”Ÿæ•ˆï¼‰ã€‚ ç”±äºç›®å‰çš„æ–¹æ¡ˆæ²¡æœ‰ä½¿ç”¨http-proxy-middlewareè¿™æ ·çš„è¯·æ±‚ä»£ç†æ¨¡å—ï¼Œå¯¼è‡´é¡¹ç›®åœ¨æœ¬åœ°å¼€å‘æ—¶è¿˜è¦éƒ¨ç½²åç«¯æœåŠ¡ï¼Œå¯¹æ–°æ¥æ‰‹çš„å¼€å‘è€…ä¸å‹å¥½ï¼Œè€Œä¸”ç»å¸¸ç”±äºæ²Ÿé€šä¸åŠæ—¶äº§ç”Ÿæµ‹è¯•ç¯å¢ƒä¸æœ¬åœ°ç¯å¢ƒçš„ä»£ç åŒæ­¥é—®é¢˜ã€‚  å› æ­¤ï¼Œåœ¨ç†Ÿæ‚‰è¿™ä¸ªé¡¹ç›®ä¹‹åï¼Œæ‰“ç®—å¯¹å…¶æ„å»ºæ–¹æ¡ˆè¿›è¡Œå‡çº§ï¼Œä¸»è¦ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚\n1. åŸæœ‰æ„å»ºæ–¹æ¡ˆæè¿° åŸæœ‰æ„å»ºé€Ÿåº¦  npm run buildï¼šæ‰“åŒ…çº¦50s npm run devï¼šå¼€å¯å¼€å‘æ¨¡å¼çº¦50sï¼Œä¿å­˜è‡ªåŠ¨é‡æ–°ç¼–è¯‘éœ€çº¦6sï¼Œç¼–è¯‘å®Œæˆåéœ€è¦åˆ·æ–°æ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œå¶å°”å› ç¼“å­˜é—®é¢˜éœ€è¦å†æ¬¡è‡ªåŠ¨é‡æ–°ç¼–è¯‘æ‰èƒ½çœ‹åˆ°æ•ˆæœ  åŸæœ‰æ„å»ºç»“æœ  ./build/developmentï¼šå­˜æ”¾æ¸²æŸ“åçš„jsæ–‡ä»¶ ./build/htmlï¼šå­˜æ”¾æ¸²æŸ“åçš„htmlæ–‡ä»¶ ./build/revï¼šä¿å­˜å„ä¸ªå…¥å£æ–‡ä»¶hashå€¼çš„jsonæ–‡ä»¶  æ‰“åŒ…ä»£ç è§£æ /** * ä½¿ç”¨gulp-cleanæ’ä»¶åˆ é™¤buildç›®å½•ä¸‹çš„æ–‡ä»¶ */ gulp.task(\u0026#39;clean\u0026#39;, function () { if (!stopClean) { return gulp.src(\u0026#39;build/\u0026#39; + directory, { read: false }).pipe(clean()) } }) /** * ä½¿ç”¨webpackæ‰“åŒ…vueä¸jsæ–‡ä»¶ï¼Œåœ¨cleanä¹‹åè¿›è¡Œ */ gulp.task(\u0026#39;webpack\u0026#39;, [\u0026#39;clean\u0026#39;], function (callback) { deCompiler.run(function (err, stats) { if (err) throw new gutil.PluginError(\u0026#39;webpack\u0026#39;, err) gutil.log(\u0026#39;[webpack]\u0026#39;, stats.toString({})) callback() }) }) /** * ä½¿ç”¨gulp-uglifyæ’ä»¶å¯¹jsæ–‡ä»¶è¿›è¡Œä¸‘åŒ–ï¼Œåœ¨webpackä¹‹åè¿›è¡Œ */ gulp.","keywords":["Engineering"],"articleBody":"æœ€è¿‘åŠå¹´åœ¨ç»´æŠ¤å…¬å¸çš„ä¸€ä¸ªç®¡ç†åå°é¡¹ç›®ï¼Œæ­å»ºä¹‹åˆçš„æŠ€æœ¯æ ˆæ¯”è¾ƒæ··ä¹±ï¼Œæ„å»ºæ–¹æ¡ˆé‡‡ç”¨äº†Gulpä¸­è°ƒç”¨Webpackçš„æ–¹å¼ï¼ŒGulpè´Ÿè´£å¤„ç†.htmlæ–‡ä»¶ï¼ŒWebpackè´Ÿè´£åŠ è½½.vueã€.jsç­‰ã€‚è€Œåœ¨è¿™ä¸€å¥—æ„å»ºæ–¹æ¡ˆä¸­ï¼Œä¸»è¦æœ‰è¿™äº›é—®é¢˜ï¼š\n æ²¡æœ‰å®ç°JSå‹ç¼©ã€CSSå…¼å®¹ç­‰åŠŸèƒ½ã€‚ åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¿å­˜ä»£ç ï¼Œé¡¹ç›®ä¼šè¿›è¡Œå®Œå…¨çš„é‡æ–°æ‰“åŒ…ï¼ŒæŒç»­æ„å»ºé€Ÿåº¦ä¸ä»…ç¼“æ…¢ï¼Œè¿˜ä¼šäº§ç”Ÿç¼“å­˜çš„ç°è±¡ï¼ˆæ„å»ºå®Œæˆååˆ·æ–°é¡µé¢æ”¹åŠ¨ä¸ç”Ÿæ•ˆï¼‰ã€‚ ç”±äºç›®å‰çš„æ–¹æ¡ˆæ²¡æœ‰ä½¿ç”¨http-proxy-middlewareè¿™æ ·çš„è¯·æ±‚ä»£ç†æ¨¡å—ï¼Œå¯¼è‡´é¡¹ç›®åœ¨æœ¬åœ°å¼€å‘æ—¶è¿˜è¦éƒ¨ç½²åç«¯æœåŠ¡ï¼Œå¯¹æ–°æ¥æ‰‹çš„å¼€å‘è€…ä¸å‹å¥½ï¼Œè€Œä¸”ç»å¸¸ç”±äºæ²Ÿé€šä¸åŠæ—¶äº§ç”Ÿæµ‹è¯•ç¯å¢ƒä¸æœ¬åœ°ç¯å¢ƒçš„ä»£ç åŒæ­¥é—®é¢˜ã€‚  å› æ­¤ï¼Œåœ¨ç†Ÿæ‚‰è¿™ä¸ªé¡¹ç›®ä¹‹åï¼Œæ‰“ç®—å¯¹å…¶æ„å»ºæ–¹æ¡ˆè¿›è¡Œå‡çº§ï¼Œä¸»è¦ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚\n1. åŸæœ‰æ„å»ºæ–¹æ¡ˆæè¿° åŸæœ‰æ„å»ºé€Ÿåº¦  npm run buildï¼šæ‰“åŒ…çº¦50s npm run devï¼šå¼€å¯å¼€å‘æ¨¡å¼çº¦50sï¼Œä¿å­˜è‡ªåŠ¨é‡æ–°ç¼–è¯‘éœ€çº¦6sï¼Œç¼–è¯‘å®Œæˆåéœ€è¦åˆ·æ–°æ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œå¶å°”å› ç¼“å­˜é—®é¢˜éœ€è¦å†æ¬¡è‡ªåŠ¨é‡æ–°ç¼–è¯‘æ‰èƒ½çœ‹åˆ°æ•ˆæœ  åŸæœ‰æ„å»ºç»“æœ  ./build/developmentï¼šå­˜æ”¾æ¸²æŸ“åçš„jsæ–‡ä»¶ ./build/htmlï¼šå­˜æ”¾æ¸²æŸ“åçš„htmlæ–‡ä»¶ ./build/revï¼šä¿å­˜å„ä¸ªå…¥å£æ–‡ä»¶hashå€¼çš„jsonæ–‡ä»¶  æ‰“åŒ…ä»£ç è§£æ /** * ä½¿ç”¨gulp-cleanæ’ä»¶åˆ é™¤buildç›®å½•ä¸‹çš„æ–‡ä»¶ */ gulp.task('clean', function () { if (!stopClean) { return gulp.src('build/' + directory, { read: false }).pipe(clean()) } }) /** * ä½¿ç”¨webpackæ‰“åŒ…vueä¸jsæ–‡ä»¶ï¼Œåœ¨cleanä¹‹åè¿›è¡Œ */ gulp.task('webpack', ['clean'], function (callback) { deCompiler.run(function (err, stats) { if (err) throw new gutil.PluginError('webpack', err) gutil.log('[webpack]', stats.toString({})) callback() }) }) /** * ä½¿ç”¨gulp-uglifyæ’ä»¶å¯¹jsæ–‡ä»¶è¿›è¡Œä¸‘åŒ–ï¼Œåœ¨webpackä¹‹åè¿›è¡Œ */ gulp.task('minify', ['webpack'], function () { if (environment) { return } else { return gulp.src('build/' + directory + '/*.js').pipe(uglify()) } }) /** * ä½¿ç”¨gulp-revæ’ä»¶ä¸ºæ‰“åŒ…åçš„æ–‡ä»¶å¢åŠ hashï¼Œåœ¨minifyä¹‹åè¿è¡Œ * * gulp-revä¼šåšä»€ä¹ˆï¼š * æ ¹æ®é™æ€èµ„æºå†…å®¹ï¼Œç”Ÿæˆmd5ç­¾åï¼Œæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åä¼šåŠ ä¸Šmd5ç­¾åï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªjsonç”¨æ¥ä¿å­˜æ–‡ä»¶åè·¯å¾„å¯¹åº”å…³ç³»ã€‚ * æ›¿æ¢htmlé‡Œé™æ€èµ„æºçš„è·¯å¾„ä¸ºå¸¦æœ‰md5å€¼çš„æ–‡ä»¶è·¯å¾„ï¼Œè¿™æ ·htmlæ‰èƒ½æ‰¾åˆ°èµ„æºè·¯å¾„ã€‚ * æœ‰äº›äººå¯èƒ½ä¼šåšï¼šé™æ€æœåŠ¡å™¨é…ç½®é™æ€èµ„æºçš„è¿‡æœŸæ—¶é—´ä¸ºæ°¸ä¸è¿‡æœŸã€‚ * è¾¾åˆ°ä»€ä¹ˆæ•ˆæœï¼š * é™æ€èµ„æºåªéœ€è¯·æ±‚ä¸€æ¬¡ï¼Œæ°¸ä¹…ç¼“å­˜ï¼Œä¸ä¼šå‘é€åå•†è¯·æ±‚304 * ç‰ˆæœ¬æ›´æ–°åªä¼šæ›´æ–°ä¿®æ”¹çš„é™æ€èµ„æºå†…å®¹ * ä¸åˆ é™¤æ—§ç‰ˆæœ¬çš„é™æ€èµ„æºï¼Œç‰ˆæœ¬å›æ»šçš„æ—¶å€™åªéœ€è¦æ›´æ–°htmlï¼ŒåŒæ ·ä¸ä¼šå¢åŠ httpè¯·æ±‚æ¬¡æ•° */ gulp.task('hashJS', ['minify'], function () { var dest = gulp.src(['ä¸€ä¸²å…¥å£æ–‡ä»¶...']) .pipe(rev()) // è®¾ç½®æ–‡ä»¶çš„hash key  .pipe(gulp.dest('build/' + directory)) // å°†ç»è¿‡ç®¡é“å¤„ç†çš„æ–‡ä»¶å†™å‡ºåˆ°ç›®å½•  .pipe(rev.manifest({})) // ç”Ÿæˆæ˜ å°„hash keyçš„json  .pipe(gulp.dest('build/rev')) // å°†ç»è¿‡ç®¡é“å¤„ç†çš„æ–‡ä»¶å†™å‡ºåˆ°ç›®å½•  !environment \u0026\u0026 gulp.src(['ä¸€ä¸²å…¥å£æ–‡ä»¶...']).pipe(clean()) return dest }) /** * ä½¿ç”¨gulp-rev-replaceæ’ä»¶ä¸ºhtmlä¸­å¼•ç”¨çš„jså’Œcssæ›¿æ¢æ–°çš„hash * ä½¿ç”¨gulp-livereloadæ’ä»¶åœ¨æ‰€æœ‰æ–‡ä»¶é‡æ–°æ‰“åŒ…å®Œæˆåå±€éƒ¨æ›´æ–°é¡µé¢ */ gulp.task('revReplace', ['hashJS'], function () { return gulp.src(['html/*.html']) .pipe(revReplace({ ... })) // ç»™htmlä¸­çš„jså¼•ç”¨æä¾›æ–°çš„hash  .pipe(gulp.dest('build/html')) // è¾“å‡ºæ–‡ä»¶  .pipe(livereload()) // å±€éƒ¨æ›´æ–°é¡µé¢ }) /** * ä½¿ç”¨gulp.watchï¼Œå½“åº”ç”¨ç¨‹åºç›®å½•ä¸‹æœ‰ä»»ä½•æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œåˆ™é‡æ–°æ‰§è¡Œä¸€éæ‰“åŒ…å‘½ä»¤ * gulp.watchï¼šç›‘è§†æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨æ—¶å€™åšä¸€äº›äº‹æƒ…ã€‚ */ gulp.task('watch', ['revReplace'], function () { stopClean = true livereload.listen() gulp.watch('app/**/*', ['clean', 'webpack', 'minify', 'hashJS', 'revReplace']) }) /** * è¾“å‡ºdevå’Œbuildçš„å·¥ä½œæµ */ gulp.task('default', ['clean', 'webpack', 'minify', 'hashJS', 'revReplace', 'watch']) // dev gulp.task('build', ['clean', 'webpack', 'minify', 'hashJS', 'revReplace']) // build /** * webpacké…ç½® */ var devCompiler = webpack({ entry: { ... // ä¸€ä¼—å…¥å£æ–‡ä»¶  vendor: ['vue', 'vue-router', 'lodash', 'echarts'] // å…¬å…±æ¨¡å—  }, output: { path: ..., // æ‰€æœ‰è¾“å‡ºæ–‡ä»¶çš„ç›®æ ‡è·¯å¾„  publicPath: ..., // è¾“å‡ºè§£ææ–‡ä»¶çš„ç›®å½•  filename: ..., // è¾“å‡ºæ–‡ä»¶  chunkFilename: ... // é€šè¿‡å¼‚æ­¥è¯·æ±‚çš„æ–‡ä»¶  }, // æ’é™¤ä»¥ä¸‹å†…å®¹æ‰“åŒ…åˆ° bundleï¼Œå‡å°æ–‡ä»¶å¤§å°  external: { jquery: 'jQuery', dialog: 'dialog' }, plugins: [ /** * é€šè¿‡å°†å…¬å…±æ¨¡å—æ‹†å‡ºæ¥ï¼Œæœ€ç»ˆåˆæˆçš„æ–‡ä»¶èƒ½å¤Ÿåœ¨æœ€å¼€å§‹çš„æ—¶å€™åŠ è½½ä¸€æ¬¡ï¼Œä¾¿å­˜åˆ°ç¼“å­˜ä¸­ä¾›åç»­ä½¿ç”¨ã€‚ * è¿™ä¸ªå¸¦æ¥é¡µé¢é€Ÿåº¦ä¸Šçš„æå‡ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šè¿…é€Ÿå°†å…¬å…±çš„ä»£ç ä»ç¼“å­˜ä¸­å–å‡ºæ¥ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è®¿é—®ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œå†å»åŠ è½½ä¸€ä¸ªæ›´å¤§çš„æ–‡ä»¶ã€‚ */ new webpack.optimize.CommonsChunkPlugin({ name: ['vendor'] }), /** * DefinePlugin å…è®¸åˆ›å»ºä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ã€‚è¿™å¯èƒ½ä¼šå¯¹å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼çš„æ„å»ºå…è®¸ä¸åŒçš„è¡Œä¸ºéå¸¸æœ‰ç”¨ã€‚ */ new webpack.DefinePlugin({ __VERSION__: new Date().getTime() }) ], resolve: { root: __dirname, extensions: ['', '.js', '.vue', '.json'], // è§£æç»„ä»¶çš„æ–‡ä»¶åç¼€ç™½åå•  alias: { ... } // é…ç½®è·¯å¾„åˆ«å  }, module: { // å„ä¸ªæ–‡ä»¶çš„loaders  loaders: [ { test: /\\.vue$/, loader: 'vue-loader' }, { test: /\\.css$/, loader: 'style-loader!css-loader' }, { test: /\\.jsx$/, loader: 'babel-loader', include: [path.join(__dirname, 'app')], exclude: /core/ }, { test: /\\.json$/, loader: 'json' } ] }, vue: { loaders: { js: 'babel-loader' } } }) 2. å°†Gulpçš„åŠŸèƒ½ç§»åˆ°Webpack1ä¸Šæ‰§è¡Œ ä½¿ç”¨html-webpack-pluginæ’ä»¶æ„å»ºé¡¹ç›®çš„ä¸».htmlæ–‡ä»¶ module.exports = { plugins: [ new HtmlWebpackPlugin({ filename: '...', // è¾“å‡ºçš„è·¯å¾„  template: '...', // æå–æºhtmlçš„è·¯å¾„  chunks: ['...'], // éœ€è¦å¯¼å…¥çš„æ¨¡å—  inject: true // æ˜¯å¦é™„åŠ åˆ°bodyåº•éƒ¨  }) ] } ä½¿ç”¨webpack.optimize.UglifyJsPluginæ’ä»¶è¿›è¡ŒJSå‹ç¼© module.exports = { plugins: [ new webpack.optimize.UglifyJsPlugin({ compress: { warnings: false } }) ] } ä½¿ç”¨webpack-dev-serveræ¨¡å—ï¼Œæä¾›nodeæ­å»ºçš„å¼€å‘ç¯å¢ƒ module.exports = { devServer: { clientLogLevel: 'warning', // è¾“å‡ºæ—¥å¿—çš„çº§åˆ«ï¼Œé…ç½®ä¸ºè­¦å‘Šçº§åˆ«ä»¥ä¸Šæ‰è¾“å‡º  inline: true, // å¯åŠ¨ live reload  hot: true, // å…è®¸å¯ç”¨çƒ­é‡è½½  compress: true, // å¯¹æ‰€æœ‰é™æ€èµ„æºè¿›è¡Œgzipå‹ç¼©  open: true, // é»˜è®¤åœ¨å¯åŠ¨æœ¬åœ°æœåŠ¡æ—¶æ‰“å¼€æµè§ˆå™¨  quiet: true, // ç¦æ­¢è¾“å‡ºç¹æ‚çš„æ„å»ºæ—¥å¿—  host: ..., // æœåŠ¡å¯åŠ¨çš„åŸŸå  port: ..., // æœåŠ¡å¯åŠ¨çš„ç«¯å£  proxy: { ... }, // httpä»£ç†é…ç½®  /** * è¿™ä¸ªé…ç½®å¸¸ç”¨äºè§£å†³spaåº”ç”¨h5è·¯ç”±æ¨¡å¼ä¸‹å°†æ‰€æœ‰404è·¯ç”±åŒ¹é…å›index.htmlçš„é—®é¢˜ * ç”±äºç”Ÿäº§ç¯å¢ƒä¸ºä¸»é¡µåŒ¹é…äº†ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„åˆ«åï¼Œå› æ­¤å¼€å‘ç¯å¢ƒä¹Ÿç…§æ¬åç«¯æœåŠ¡çš„é…ç½® */ historyApiFallback: { rewrites: [{ from: '/^\\/admin/', to: '...' }] } } } è¸©å‘  webpack-dev-server@3.2.1 requires a peer of webpack^@4.0.0 but none is installed.ï¼šè¿™ä¸¤ä¸ªæ¨¡å—ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œå›é€€åˆ°webpack-dev-server@2æˆåŠŸè¿è¡Œã€‚ Cannot resolve module 'fsevents' ...ï¼šå°†å…¨å±€çš„webpackè°ƒç”¨æ”¹ä¸ºç›´æ¥ä»node_modules/webpackä¸‹ç›´æ¥è°ƒç”¨ï¼Œè§£å†³äº†é—®é¢˜ï¼Œnode node_modules/webpack/bin/webpack.js --config webpack.config.jsã€‚ Cannot resolve module 'fs' ...ï¼šé…ç½®config.node.fs = 'empty'ï¼Œä¸ºWebpackæä¾›nodeåŸç”Ÿæ¨¡å—ï¼Œä½¿å…¶èƒ½åŠ è½½åˆ°è¿™ä¸ªå¯¹è±¡ã€‚ çƒ­é‡è½½åªå¯¹.jså’Œ.cssåŠ.vueä¸­çš„å†…æ ·å¼ç”Ÿæ•ˆï¼Œå¯¹.vueæ–‡ä»¶ä¸­çš„htmlæ¨¡æ¿åŠjså†…å®¹éƒ½ä¸ç”Ÿæ•ˆï¼Œä¼šæ‰“å°â€œæ¨¡å—ä»£ç å·²å‘ç”Ÿæ”¹å˜å¹¶é‡æ–°ç¼–è¯‘ï¼Œä½†çƒ­é‡è½½ä¸ç”Ÿæ•ˆï¼Œå¯èƒ½ä¼šå¯ç”¨å…¨å±€åˆ·æ–°çš„ç­–ç•¥â€ä¹‹ç±»çš„ä¿¡æ¯ï¼Œæš‚æ—¶æ²¡æœ‰è§£å†³ï¼Œåˆæ­¥åˆ¤æ–­æ˜¯ä½ç‰ˆæœ¬çš„vue-hot-reload-apiå¯¹è¿™äº›éƒ¨åˆ†çš„å¤„ç†æœ‰é—®é¢˜ï¼Œæœ‰å¤§ç¥äº†è§£åŸç†å¯ä»¥åœ¨è¯„è®ºåŒºç§‘æ™®ä¸€å“ˆ=.=ã€‚  3. ä»Webpack1å‡çº§åˆ°Webpack3 ç”±äºWebpack2ä¸Webpack3å‡ ä¹å®Œå…¨å…¼å®¹ï¼Œåªæ˜¯æ¶‰åŠåˆ°ä¸€äº›å¢é‡çš„åŠŸèƒ½ï¼Œå› æ­¤é€‰æ‹©ç›´æ¥ä»Webpack1è¿ç§»åˆ°Webapck3ï¼Œå…ˆåœ¨é¡¹ç›®ä¸­å®‰è£…Webpack3ï¼Œç„¶åæ ¹æ®Webpack2æ–‡æ¡£ä¸­ã€Šä»Webpack1è¿ç§»ã€‹çš„ç« èŠ‚ï¼Œå¯¹é…ç½®é¡¹è¿›è¡Œæ›´æ”¹ï¼Œå‚è€ƒçš„æ–‡æ¡£æˆ³è¿™ä¸ªï¼šhttps://www.html.cn/doc/webpack2/guides/migrating/\nè¿™æ¬¡å‡çº§æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ ¹æ®æ–‡æ¡£é…ç½®ç¨ä½œæ›´æ”¹å°±è·‘é€šäº†ã€‚æ¢³ç†ä¸€ä¸‹ç›®å‰ä¸ºæ­¢å®ç°çš„åŠŸèƒ½ï¼š\n æ–°çš„Webpackæ„å»ºä»£ç å·²ç»å®ç°äº†åŸæœ‰çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä¸‹é¢åˆ—ä¸¾æ–°å¢çš„åŠŸèƒ½ã€‚ ä½¿ç”¨webpack-dev-serverä½œä¸ºå¼€å‘æœåŠ¡å™¨ï¼Œå®ç°äº†ä¿å­˜æ—¶live reloadçš„åŠŸèƒ½ã€‚ ä½¿ç”¨http-proxy-middlewareæ’ä»¶ï¼Œå°†è¯·æ±‚ç›´æ¥ä»£ç†åˆ°æµ‹è¯•æœï¼Œè®©å¼€å‘ç¯å¢ƒè„±ç¦»äº†æœ¬åœ°éƒ¨ç½²çš„åç«¯æœåŠ¡ï¼Œå¤§å¤§é™ä½äº†å¼€å‘ç¯å¢ƒéƒ¨ç½²çš„æ—¶é—´æˆæœ¬ã€‚ æ–°å¢friendly-errors-webpack-pluginï¼Œè¾“å‡ºå‹å¥½çš„æ„å»ºæ—¥å¿—ï¼Œæ‰“å°å‡ ä¸ªé‡è¦æ¨¡å—çš„å¼€å‘ç¯å¢ƒåœ°å€ï¼Œé…ç½®æ–¹é¢å®Œå…¨å‚è€ƒäº†vue-cli@2çš„é»˜è®¤é…ç½®ã€‚ æ–°å¢postcss-loaderï¼Œå¯¹cssæ·»åŠ å…¼å®¹å¤„ç†ï¼Œé…ç½®æ–¹é¢å®Œå…¨å‚è€ƒäº†vue-cli@2çš„é»˜è®¤é…ç½®ã€‚ ä½¿ç”¨webpack.optimize.UglifyJsPluginå‹ç¼©jsä»£ç ã€‚  å°è¯•è¿›è¡Œæ„å»ºï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼š\n npm run buildï¼šçº¦135s npm run devï¼šåˆæ¬¡æ„å»ºçº¦58sï¼ŒæŒç»­æ„å»ºçº¦30s  é¡¹ç›®æ„å»ºæ—¶é—´è¿‡é•¿ï¼ˆç¬¬ä¸€æ¬¡æ‰“åŒ…æŠŠè‡ªå·±å“äº†ä¸€è·³â€¦ï¼‰ï¼Œåªèƒ½ç»§ç»­å¯»æ±‚æ„å»ºé€Ÿåº¦ä¸Šçš„ä¼˜åŒ–\n4. åœ¨Webpack3ä¸‹è¿›è¡Œæ„å»ºé€Ÿåº¦çš„ä¼˜åŒ– ä½¿ç”¨webpack-jarvisç›‘æµ‹æ„å»ºæ€§èƒ½ webpack-jarvisæ˜¯ä¸€ä¸ªå›¾å½¢åŒ–çš„webpackæ€§èƒ½ç›‘æµ‹å·¥å…·ï¼Œå®ƒé…ç½®ç®€ä¾¿ï¼Œå¯¹æ„å»ºè¿‡ç¨‹çš„æ—¶é—´å æ¯”ã€æ„å»ºç»“æœçš„è¯¦ç»†è®°å½•éƒ½æœ‰å…·ä½“çš„è¾“å‡º\n// ç»è¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥åœ¨æœ¬åœ°3001ç«¯å£è¾“å‡ºæ„å»ºç»“æœè®°å½• const Jarvis = require('webpack-jarvis') module.exports = { plugins: [ new Jarvis({ watchOnly: false, port: 3001 }) ] } ä½¿ç”¨happypack å…ˆæ ¹æ®ç½‘ä¸Šæœåˆ°çš„æ–‡ç« ï¼Œåšä¸€äº›ç®€å•çš„ä¼˜åŒ–ï¼Œå¦‚ä½¿ç”¨happypackï¼Œè¿™ä¸ªæ¨¡å—é€šè¿‡å¤šè¿›ç¨‹æ¨¡å‹ï¼Œæ¥åŠ é€Ÿä»£ç æ„å»ºï¼Œä½†æ˜¯ä½¿ç”¨ä¹‹åè²Œä¼¼æ²¡æœ‰å¤ªæ˜æ˜¾çš„ç»“æœï¼Œæ„å»ºæ—¶é—´å¤§æ¦‚å‡å°‘äº†å‡ ç§’å§â€¦æš‚æ—¶è¿˜ä¸å¤ªæ‡‚è¿™ä¸ªæ¨¡å—å¯¹ä¼˜åŒ–ä»€ä¹ˆåœºæ™¯çš„æ•ˆæœæ¯”è¾ƒæ˜æ˜¾ï¼Œä¹‹å‰æœ‰çœ‹åˆ°ä¸€ç¯‡è®²è§£happypackåŸç†çš„æ–‡ç« ï¼Œä½†è¿˜æ²¡ç»†çœ‹ï¼Œæœ‰å…´è¶£å°ä¼™ä¼´å¯ä»¥ç ”ç©¶ä¸€ä¸‹ï¼Œè¦æ˜¯èƒ½åœ¨è¯„è®ºé‡Œç®€æ´æ˜äº†çš„ç»™æ¸£æ¸£æ¥¼ä¸»è§£é‡Šä¸€ä¸‹å°±æ›´å¥½äº†TUTï¼šhttp://taobaofed.org/blog/2016/12/08/happypack-source-code-analysis/\nconst HappyPack = require('happypack') const os = require('os') const happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length }) module.exports = { plugins: [ new HappyPack({ // happypackçš„idï¼Œåœ¨è°ƒç”¨æ—¶éœ€è¦å£°æ˜ï¼Œè‹¥éœ€è¦ç¼–è¯‘å…¶ä»–ç±»å‹çš„æ–‡ä»¶éœ€è¦å†å£°æ˜ä¸€ä¸ªhappypack  id: 'js', // cacheDirectoryï¼šè®¾ç½®åï¼Œå°†å°½é‡åœ¨babelç¼–è¯‘æ—¶ä½¿ç”¨ç¼“å­˜åŠ è½½å™¨çš„ç»“æœï¼Œé¿å…é‡æ–°èµ°ä¸€ébabelçš„é«˜æ˜‚ä»£ä»·  use: [{ loader: 'babel-loader', cacheDirectory: true }], // æ ¹æ®cpuçš„æ ¸å¿ƒæ•°åˆ¤æ–­éœ€è¦æ‹†åˆ†å¤šå°‘ä¸ªè¿›ç¨‹æ±   threadPool: happyThreadPool, // æ˜¯å¦è¾“å‡ºç¼–è¯‘è¿‡ç¨‹çš„æ—¥å¿—  verbose: true }) ] } åšå®Œè¿™ä¸€æ­¥åï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼š\n npm run buildï¼šçº¦130s npm run devï¼šåˆæ¬¡æ„å»ºçº¦60sï¼ŒæŒç»­æ„å»ºçº¦30s  devtoolé…ç½®ä¸ºcheap-module-eval-source-map devtoolé€‰é¡¹å¯ç”¨cheap-module-eval-source-mapæ¨¡å¼ï¼švue-cli@2é»˜è®¤é…ç½®ä¸ºè¿™ç§æ¨¡å¼ï¼Œcheapä»£è¡¨åœ¨è¾“å‡ºsource-mapæ—¶çœç•¥åˆ—ä¿¡æ¯ï¼›moduleè¡¨ç¤ºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¯ç”¨å¦‚babel-loaderè¿™æ ·çš„é¢„ç¼–è¯‘å™¨ï¼Œä½¿å¾—è°ƒè¯•æ—¶å¯ä»¥ç›´æ¥çœ‹åˆ°æœªç»ç¼–è¯‘çš„æºä»£ç ï¼›evalè¡¨ç¤ºå¯ç”¨evalæ¨¡å¼ç¼–è¯‘ï¼Œè¯¥æ¨¡å¼ç›´æ¥ä½¿ç”¨evalå‡½æ•°æ‰§è¡Œç¼–è¯‘åæ¨¡å—çš„å­—ç¬¦ä¸²ï¼Œå‡å°‘äº†å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„ä»£ç æ–‡ä»¶è¿™ä¸ªæ­¥éª¤ï¼ŒåŠ å¿«äº†é¡¹ç›®å¼€å‘ä¸­é‡å»ºçš„é€Ÿåº¦ï¼›source-mapè¡¨ç¤ºè¾“å‡ºæºä»£ç çš„æ˜ å°„è¡¨ï¼Œä½¿å¾—å¼€å‘æ—¶å¯ä»¥ç›´æ¥æŠŠé”™è¯¯å®šä½åˆ°æºä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚\nåšå®Œè¿™ä¸€æ­¥åï¼Œæ•ˆæœå¹¶ä¸æ˜æ˜¾=.=ï¼ˆç›¸æ¯”åŸæ¥çš„source-mapï¼‰ï¼Œå¤§æ¦‚å‡å°‘äº†å‡ ç§’ï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼š\n npm run buildï¼šçº¦130s npm run devï¼šåˆæ¬¡æ„å»ºçº¦58sï¼ŒæŒç»­æ„å»ºçº¦30s  ä½¿ç”¨html-webpack-plugin-for-multihtmlæå‡å¤šå…¥å£é¡¹ç›®é‡å»ºé€Ÿåº¦ é‡å»ºä¸€æ¬¡ç«Ÿç„¶éœ€è¦30sï¼å„ç§æœç´¢æ‰¾åˆ°äº†html-webpack-pluginçš„ä¸€æ¡issueï¼Œå‘ç°html-webpack-plugin@2åœ¨æ„å»ºå¤šå…¥å£åº”ç”¨æ—¶é€Ÿåº¦ç¡®å®æœ‰æ˜æ˜¾å˜æ…¢çš„æƒ…å†µï¼ŒåŸå› æ˜¯æ²¡æœ‰æˆåŠŸçš„å¯¹æ„å»ºå†…å®¹è¿›è¡Œç¼“å­˜ï¼Œä½¿æ¯æ¬¡é‡å»ºéƒ½é‡æ–°ç¼–è¯‘æ‰€æœ‰ä»£ç ã€‚ä½œè€…ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨è¿™ä¸ªæ¨¡å—çš„ä¸€ä¸ªåˆ†æ”¯é¡¹ç›®ï¼ˆæ˜¯ç”±ä½œè€…æœ¬äººforkåŸé¡¹ç›®å¹¶é’ˆå¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œä¿®å¤çš„é¡¹ç›®ï¼‰html-webpack-plugin-for-multihtmlï¼Œç”¨æ³•ä¸html-webpack-pluginå®Œå…¨ç›¸åŒï¼Œä½¿ç”¨ä¹‹åé‡å»ºä»…éœ€1så·¦å³ã€‚\nåšå®Œè¿™ä¸€æ­¥åï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼š\n npm run buildï¼šçº¦130s npm run devï¼šåˆæ¬¡æ„å»ºçº¦58sï¼ŒæŒç»­æ„å»ºçº¦1s  ä½¿ç”¨webpack.DllPluginæå–å…¬å…±æ¨¡å— åœ¨è¾“å‡ºç»“æœä¸­æ‰¾åˆ°äº†ä¸å°‘è¾ƒå¤§çš„ä¾èµ–åŒ…ï¼Œå¦‚Vueçš„æ ¸å¿ƒåº“ã€lodashã€echartsç­‰ç­‰ï¼Œè¿˜æœ‰ä¸€äº›ä¸å¸Œæœ›è¢«æ‰“åŒ…çš„é™æ€èµ„æºï¼Œæƒ³åŠæ³•é¿å…æ¯æ¬¡éƒ½ç¼–è¯‘è¿™äº›å†…å®¹ï¼Œæå‡ç¼–è¯‘é€Ÿåº¦ï¼Œæ‰€ä»¥æ‰¾åˆ°äº†è¿™ä¸ªæ’ä»¶ã€‚\nwebpack.DllPluginè¿™ä¸ªæ’ä»¶æ˜¯æ¥æºäºWindowsç³»ç»Ÿçš„.dllæ–‡ä»¶ï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰çš„ç”¨æ³•ï¼šé¦–å…ˆé€šè¿‡DllPluginæ¨¡å—æ„å»ºå‡ºä¸€ä¸ªåŒ…å«å…¬å…±æ¨¡å—çš„åŒ…å’Œä¸€ä¸ªæ˜ å°„è¡¨ï¼Œå†é€šè¿‡DllReferencePluginæ¨¡å—é€šè¿‡æ˜ å°„è¡¨ç»™æ¯ä¸ªæ¨¡å—å…³è”å¯¹åº”çš„ä¾èµ–ï¼Œè¿™æ ·å¯ä»¥å¯¹è¿™äº›å…¬å…±æ¨¡å—è¿›è¡Œé¢„å…ˆæ‰“åŒ…ï¼Œä»¥åæ„å»ºçš„æ—¶å€™å°±ä¸éœ€è¦å¤„ç†è¿™äº›æ¨¡å—ï¼Œå‡å°‘æ‰“åŒ…æ—¶é—´ã€‚\n// webpack.dll.conf.js const webpack = require('webpack') module.exports = { entry: { vendor: [...] }, output: { path: resolve('build/development'), filename: '[name].dll.js', library: '[name]_library' }, plugins: [ new webpack.optimize.UglifyJsPlugin(), new webpack.DllPlugin({ path: resolve('build/development/[name]-manifest.json'), // ç”Ÿæˆmanifestæ–‡ä»¶è¾“å‡ºçš„ä½ç½®å’Œæ–‡ä»¶åç§°  name: '[name]-library', // ä¸output.libraryæ˜¯ä¸€æ ·çš„ï¼Œå¯¹åº”manifest.jsonæ–‡ä»¶ä¸­nameå­—æ®µçš„å€¼ï¼Œé˜²æ­¢å…¨å±€å˜é‡å†²çª  context: __dirname }) ] } // webpack.base.conf.js const webpack = require('webpack') module.exports = { plugins: [ new webpack.DllReferencePlugin({ context: __dirname, manifest: require('../build/development/vendor-manifest.json') // è®©webpackä»æ˜ å°„è¡¨è·å–ä½¿ç”¨çš„ä¾èµ–  }) ] } æ‰“åŒ…å‡ºæ¥ä¹‹åè¿˜éœ€è¦åœ¨htmlæ–‡ä»¶ä¸­å¼•å…¥å…¬å…±åº“vendor.dll.jsæ–‡ä»¶\nhtml headhead body div id=\"app\"div script src=\"/build/development/vendor.dll.js\"script  body html åšå®Œè¿™ä¸€æ­¥åï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼Œå‘ç°æ„å»ºæ•ˆç‡æœ‰äº†æ˜æ˜¾çš„æé«˜ï¼š\n npm run dllï¼šçº¦25s npm run buildï¼šçº¦70s npm run devï¼šåˆæ¬¡æ„å»ºçº¦55sï¼ŒæŒç»­æ„å»ºçº¦1s  5. åè®° ä¼˜åŒ–åˆ°è¿™é‡Œå°±å·®ä¸å¤šç»“æŸï¼Œè¿™æ¬¡çš„ä¼˜åŒ–ä¸ºæ—§é¡¹ç›®æä¾›äº†æ–°ä¸€ä»£spaé¡¹ç›®åº”æœ‰çš„ä¸€äº›åŠŸèƒ½ï¼Œæ­å»ºäº†æ›´ç°ä»£çš„æœ¬åœ°å¼€å‘ç¯å¢ƒã€‚ç”±äºæœ¬æ–‡ç¯‡å¹…æœ‰ç‚¹å¤ªé•¿ï¼Œå®Œæ•´çš„é…ç½®å°±ä¸¢åœ¨å¦ä¸€ç¯‡æ–‡ç« é‡Œã€‚\n6. Q\u0026A Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥å‡çº§åˆ°Webpack4ï¼Ÿ\nA: Webpack4åªæ”¯æŒvue-loader@15ä»¥ä¸Šç‰ˆæœ¬ï¼Œè€Œè¿™ä¸ªç‰ˆæœ¬å·²ç»æ— æ³•è§£æVue1çš„æ–‡ä»¶ã€‚\n","wordCount":"698","inLanguage":"en","datePublished":"2019-04-04T00:00:00Z","dateModified":"2019-04-04T00:00:00Z","author":{"@type":"Person","name":"YYJ"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://geekhouse.top/posts/engineering_vue1_update/"},"publisher":{"@type":"Organization","name":"GeekHouse | ä¸è‚¥çš„è‚¥ç¾Š","logo":{"@type":"ImageObject","url":"https://geekhouse.top/%3Clink%20/%20abs%20url%3E"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://geekhouse.top/ accesskey=h title="ğŸ‘ GeekHouse (Alt + H)">ğŸ‘ GeekHouse</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://geekhouse.top/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://geekhouse.top/timeline/ title=Timeline>
<span>Timeline</span>
</a>
</li>
<li>
<a href=https://geekhouse.top/about/ title=About>
<span>About</span>
</a>
</li>
<li>
<a href=https://geekhouse.top/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$']],displayMath:[['$$','$$']],processEscapes:!0,processEnvironments:!0,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var b=MathJax.Hub.getAllJax(),a;for(a=0;a<b.length;a+=1)b[a].SourceElement().parentNode.className+=' has-jax'})</script>
<style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
Vue1.0+Webpack1+Gulpé¡¹ç›®å‡çº§æ„å»ºæ–¹æ¡ˆçš„è¸©å‘è·¯
</h1>
<div class=post-meta>April 4, 2019&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;YYJ&nbsp;|&nbsp;<a href=https://github.com/yyj08070631/yyj08070631.github.io/edit/master/content/posts/engineering_vue1_update/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<div class=post-content><p>æœ€è¿‘åŠå¹´åœ¨ç»´æŠ¤å…¬å¸çš„ä¸€ä¸ªç®¡ç†åå°é¡¹ç›®ï¼Œæ­å»ºä¹‹åˆçš„æŠ€æœ¯æ ˆæ¯”è¾ƒæ··ä¹±ï¼Œæ„å»ºæ–¹æ¡ˆé‡‡ç”¨äº†<code>Gulp</code>ä¸­è°ƒç”¨<code>Webpack</code>çš„æ–¹å¼ï¼Œ<code>Gulp</code>è´Ÿè´£å¤„ç†<code>.html</code>æ–‡ä»¶ï¼Œ<code>Webpack</code>è´Ÿè´£åŠ è½½<code>.vue</code>ã€<code>.js</code>ç­‰ã€‚è€Œåœ¨è¿™ä¸€å¥—æ„å»ºæ–¹æ¡ˆä¸­ï¼Œä¸»è¦æœ‰è¿™äº›é—®é¢˜ï¼š</p>
<ol>
<li>æ²¡æœ‰å®ç°JSå‹ç¼©ã€CSSå…¼å®¹ç­‰åŠŸèƒ½ã€‚</li>
<li>åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¿å­˜ä»£ç ï¼Œé¡¹ç›®ä¼šè¿›è¡Œå®Œå…¨çš„é‡æ–°æ‰“åŒ…ï¼ŒæŒç»­æ„å»ºé€Ÿåº¦ä¸ä»…ç¼“æ…¢ï¼Œè¿˜ä¼šäº§ç”Ÿç¼“å­˜çš„ç°è±¡ï¼ˆæ„å»ºå®Œæˆååˆ·æ–°é¡µé¢æ”¹åŠ¨ä¸ç”Ÿæ•ˆï¼‰ã€‚</li>
<li>ç”±äºç›®å‰çš„æ–¹æ¡ˆæ²¡æœ‰ä½¿ç”¨<code>http-proxy-middleware</code>è¿™æ ·çš„è¯·æ±‚ä»£ç†æ¨¡å—ï¼Œå¯¼è‡´é¡¹ç›®åœ¨æœ¬åœ°å¼€å‘æ—¶è¿˜è¦éƒ¨ç½²åç«¯æœåŠ¡ï¼Œå¯¹æ–°æ¥æ‰‹çš„å¼€å‘è€…ä¸å‹å¥½ï¼Œè€Œä¸”ç»å¸¸ç”±äºæ²Ÿé€šä¸åŠæ—¶äº§ç”Ÿæµ‹è¯•ç¯å¢ƒä¸æœ¬åœ°ç¯å¢ƒçš„ä»£ç åŒæ­¥é—®é¢˜ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œåœ¨ç†Ÿæ‚‰è¿™ä¸ªé¡¹ç›®ä¹‹åï¼Œæ‰“ç®—å¯¹å…¶æ„å»ºæ–¹æ¡ˆè¿›è¡Œå‡çº§ï¼Œä¸»è¦ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚</p>
<h2 id=1-åŸæœ‰æ„å»ºæ–¹æ¡ˆæè¿°>1. åŸæœ‰æ„å»ºæ–¹æ¡ˆæè¿°<a hidden class=anchor aria-hidden=true href=#1-åŸæœ‰æ„å»ºæ–¹æ¡ˆæè¿°>#</a></h2>
<h3 id=åŸæœ‰æ„å»ºé€Ÿåº¦>åŸæœ‰æ„å»ºé€Ÿåº¦<a hidden class=anchor aria-hidden=true href=#åŸæœ‰æ„å»ºé€Ÿåº¦>#</a></h3>
<ul>
<li><code>npm run build</code>ï¼šæ‰“åŒ…çº¦50s</li>
<li><code>npm run dev</code>ï¼šå¼€å¯å¼€å‘æ¨¡å¼çº¦50sï¼Œä¿å­˜è‡ªåŠ¨é‡æ–°ç¼–è¯‘éœ€çº¦6sï¼Œç¼–è¯‘å®Œæˆåéœ€è¦åˆ·æ–°æ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œå¶å°”å› ç¼“å­˜é—®é¢˜éœ€è¦å†æ¬¡è‡ªåŠ¨é‡æ–°ç¼–è¯‘æ‰èƒ½çœ‹åˆ°æ•ˆæœ</li>
</ul>
<h3 id=åŸæœ‰æ„å»ºç»“æœ>åŸæœ‰æ„å»ºç»“æœ<a hidden class=anchor aria-hidden=true href=#åŸæœ‰æ„å»ºç»“æœ>#</a></h3>
<ul>
<li><code>./build/development</code>ï¼šå­˜æ”¾æ¸²æŸ“åçš„jsæ–‡ä»¶</li>
<li><code>./build/html</code>ï¼šå­˜æ”¾æ¸²æŸ“åçš„htmlæ–‡ä»¶</li>
<li><code>./build/rev</code>ï¼šä¿å­˜å„ä¸ªå…¥å£æ–‡ä»¶hashå€¼çš„jsonæ–‡ä»¶</li>
</ul>
<h3 id=æ‰“åŒ…ä»£ç è§£æ>æ‰“åŒ…ä»£ç è§£æ<a hidden class=anchor aria-hidden=true href=#æ‰“åŒ…ä»£ç è§£æ>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>/**
</span><span style=color:#75715e> * ä½¿ç”¨gulp-cleanæ’ä»¶åˆ é™¤buildç›®å½•ä¸‹çš„æ–‡ä»¶
</span><span style=color:#75715e> */</span>
<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#39;clean&#39;</span>, <span style=color:#66d9ef>function</span> () {
    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>stopClean</span>) {
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>src</span>(<span style=color:#e6db74>&#39;build/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>directory</span>, { <span style=color:#a6e22e>read</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span> }).<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>clean</span>())
    }
})
<span style=color:#75715e>/**
</span><span style=color:#75715e> * ä½¿ç”¨webpackæ‰“åŒ…vueä¸jsæ–‡ä»¶ï¼Œåœ¨cleanä¹‹åè¿›è¡Œ
</span><span style=color:#75715e> */</span>
<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#39;webpack&#39;</span>, [<span style=color:#e6db74>&#39;clean&#39;</span>], <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>callback</span>) {
    <span style=color:#a6e22e>deCompiler</span>.<span style=color:#a6e22e>run</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>stats</span>) {
        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span>) <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>gutil</span>.<span style=color:#a6e22e>PluginError</span>(<span style=color:#e6db74>&#39;webpack&#39;</span>, <span style=color:#a6e22e>err</span>)
        <span style=color:#a6e22e>gutil</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;[webpack]&#39;</span>, <span style=color:#a6e22e>stats</span>.<span style=color:#a6e22e>toString</span>({}))
        <span style=color:#a6e22e>callback</span>()
    })
})
<span style=color:#75715e>/**
</span><span style=color:#75715e> * ä½¿ç”¨gulp-uglifyæ’ä»¶å¯¹jsæ–‡ä»¶è¿›è¡Œä¸‘åŒ–ï¼Œåœ¨webpackä¹‹åè¿›è¡Œ
</span><span style=color:#75715e> */</span>
<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#39;minify&#39;</span>, [<span style=color:#e6db74>&#39;webpack&#39;</span>], <span style=color:#66d9ef>function</span> () {
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>environment</span>) {
        <span style=color:#66d9ef>return</span>
    } <span style=color:#66d9ef>else</span> {
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>src</span>(<span style=color:#e6db74>&#39;build/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>directory</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/*.js&#39;</span>).<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>uglify</span>())
    }
})
<span style=color:#75715e>/**
</span><span style=color:#75715e> * ä½¿ç”¨gulp-revæ’ä»¶ä¸ºæ‰“åŒ…åçš„æ–‡ä»¶å¢åŠ hashï¼Œåœ¨minifyä¹‹åè¿è¡Œ
</span><span style=color:#75715e> * 
</span><span style=color:#75715e> * gulp-revä¼šåšä»€ä¹ˆï¼š
</span><span style=color:#75715e> * æ ¹æ®é™æ€èµ„æºå†…å®¹ï¼Œç”Ÿæˆmd5ç­¾åï¼Œæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åä¼šåŠ ä¸Šmd5ç­¾åï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªjsonç”¨æ¥ä¿å­˜æ–‡ä»¶åè·¯å¾„å¯¹åº”å…³ç³»ã€‚
</span><span style=color:#75715e> * æ›¿æ¢htmlé‡Œé™æ€èµ„æºçš„è·¯å¾„ä¸ºå¸¦æœ‰md5å€¼çš„æ–‡ä»¶è·¯å¾„ï¼Œè¿™æ ·htmlæ‰èƒ½æ‰¾åˆ°èµ„æºè·¯å¾„ã€‚
</span><span style=color:#75715e> * æœ‰äº›äººå¯èƒ½ä¼šåšï¼šé™æ€æœåŠ¡å™¨é…ç½®é™æ€èµ„æºçš„è¿‡æœŸæ—¶é—´ä¸ºæ°¸ä¸è¿‡æœŸã€‚
</span><span style=color:#75715e> * è¾¾åˆ°ä»€ä¹ˆæ•ˆæœï¼š
</span><span style=color:#75715e> * é™æ€èµ„æºåªéœ€è¯·æ±‚ä¸€æ¬¡ï¼Œæ°¸ä¹…ç¼“å­˜ï¼Œä¸ä¼šå‘é€åå•†è¯·æ±‚304
</span><span style=color:#75715e> * ç‰ˆæœ¬æ›´æ–°åªä¼šæ›´æ–°ä¿®æ”¹çš„é™æ€èµ„æºå†…å®¹
</span><span style=color:#75715e> * ä¸åˆ é™¤æ—§ç‰ˆæœ¬çš„é™æ€èµ„æºï¼Œç‰ˆæœ¬å›æ»šçš„æ—¶å€™åªéœ€è¦æ›´æ–°htmlï¼ŒåŒæ ·ä¸ä¼šå¢åŠ httpè¯·æ±‚æ¬¡æ•°
</span><span style=color:#75715e> */</span>
<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#39;hashJS&#39;</span>, [<span style=color:#e6db74>&#39;minify&#39;</span>], <span style=color:#66d9ef>function</span> () {
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>dest</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>src</span>([<span style=color:#e6db74>&#39;ä¸€ä¸²å…¥å£æ–‡ä»¶...&#39;</span>])
        .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>rev</span>()) <span style=color:#75715e>// è®¾ç½®æ–‡ä»¶çš„hash key
</span><span style=color:#75715e></span>        .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>dest</span>(<span style=color:#e6db74>&#39;build/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>directory</span>)) <span style=color:#75715e>// å°†ç»è¿‡ç®¡é“å¤„ç†çš„æ–‡ä»¶å†™å‡ºåˆ°ç›®å½•
</span><span style=color:#75715e></span>        .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>rev</span>.<span style=color:#a6e22e>manifest</span>({})) <span style=color:#75715e>// ç”Ÿæˆæ˜ å°„hash keyçš„json
</span><span style=color:#75715e></span>        .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>dest</span>(<span style=color:#e6db74>&#39;build/rev&#39;</span>)) <span style=color:#75715e>// å°†ç»è¿‡ç®¡é“å¤„ç†çš„æ–‡ä»¶å†™å‡ºåˆ°ç›®å½•
</span><span style=color:#75715e></span>    <span style=color:#f92672>!</span><span style=color:#a6e22e>environment</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>src</span>([<span style=color:#e6db74>&#39;ä¸€ä¸²å…¥å£æ–‡ä»¶...&#39;</span>]).<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>clean</span>())
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>dest</span>
})
<span style=color:#75715e>/**
</span><span style=color:#75715e> * ä½¿ç”¨gulp-rev-replaceæ’ä»¶ä¸ºhtmlä¸­å¼•ç”¨çš„jså’Œcssæ›¿æ¢æ–°çš„hash
</span><span style=color:#75715e> * ä½¿ç”¨gulp-livereloadæ’ä»¶åœ¨æ‰€æœ‰æ–‡ä»¶é‡æ–°æ‰“åŒ…å®Œæˆåå±€éƒ¨æ›´æ–°é¡µé¢
</span><span style=color:#75715e> */</span>
<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#39;revReplace&#39;</span>, [<span style=color:#e6db74>&#39;hashJS&#39;</span>], <span style=color:#66d9ef>function</span> () {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>src</span>([<span style=color:#e6db74>&#39;html/*.html&#39;</span>])
        .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>revReplace</span>({ ... })) <span style=color:#75715e>// ç»™htmlä¸­çš„jså¼•ç”¨æä¾›æ–°çš„hash
</span><span style=color:#75715e></span>        .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>dest</span>(<span style=color:#e6db74>&#39;build/html&#39;</span>)) <span style=color:#75715e>// è¾“å‡ºæ–‡ä»¶
</span><span style=color:#75715e></span>        .<span style=color:#a6e22e>pipe</span>(<span style=color:#a6e22e>livereload</span>()) <span style=color:#75715e>// å±€éƒ¨æ›´æ–°é¡µé¢
</span><span style=color:#75715e></span>})
<span style=color:#75715e>/**
</span><span style=color:#75715e> * ä½¿ç”¨gulp.watchï¼Œå½“åº”ç”¨ç¨‹åºç›®å½•ä¸‹æœ‰ä»»ä½•æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œåˆ™é‡æ–°æ‰§è¡Œä¸€éæ‰“åŒ…å‘½ä»¤
</span><span style=color:#75715e> * gulp.watchï¼šç›‘è§†æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨æ—¶å€™åšä¸€äº›äº‹æƒ…ã€‚
</span><span style=color:#75715e> */</span>
<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#39;watch&#39;</span>, [<span style=color:#e6db74>&#39;revReplace&#39;</span>], <span style=color:#66d9ef>function</span> () {
    <span style=color:#a6e22e>stopClean</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
    <span style=color:#a6e22e>livereload</span>.<span style=color:#a6e22e>listen</span>()
    <span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>watch</span>(<span style=color:#e6db74>&#39;app/**/*&#39;</span>, [<span style=color:#e6db74>&#39;clean&#39;</span>, <span style=color:#e6db74>&#39;webpack&#39;</span>, <span style=color:#e6db74>&#39;minify&#39;</span>, <span style=color:#e6db74>&#39;hashJS&#39;</span>, <span style=color:#e6db74>&#39;revReplace&#39;</span>])
})
<span style=color:#75715e>/**
</span><span style=color:#75715e> * è¾“å‡ºdevå’Œbuildçš„å·¥ä½œæµ
</span><span style=color:#75715e> */</span>
<span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#39;default&#39;</span>, [<span style=color:#e6db74>&#39;clean&#39;</span>, <span style=color:#e6db74>&#39;webpack&#39;</span>, <span style=color:#e6db74>&#39;minify&#39;</span>, <span style=color:#e6db74>&#39;hashJS&#39;</span>, <span style=color:#e6db74>&#39;revReplace&#39;</span>, <span style=color:#e6db74>&#39;watch&#39;</span>]) <span style=color:#75715e>// dev
</span><span style=color:#75715e></span><span style=color:#a6e22e>gulp</span>.<span style=color:#a6e22e>task</span>(<span style=color:#e6db74>&#39;build&#39;</span>, [<span style=color:#e6db74>&#39;clean&#39;</span>, <span style=color:#e6db74>&#39;webpack&#39;</span>, <span style=color:#e6db74>&#39;minify&#39;</span>, <span style=color:#e6db74>&#39;hashJS&#39;</span>, <span style=color:#e6db74>&#39;revReplace&#39;</span>]) <span style=color:#75715e>// build
</span><span style=color:#75715e></span><span style=color:#75715e>/**
</span><span style=color:#75715e> * webpacké…ç½®
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>devCompiler</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>webpack</span>({
    <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
        ... <span style=color:#75715e>// ä¸€ä¼—å…¥å£æ–‡ä»¶
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>vendor</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;vue&#39;</span>, <span style=color:#e6db74>&#39;vue-router&#39;</span>, <span style=color:#e6db74>&#39;lodash&#39;</span>, <span style=color:#e6db74>&#39;echarts&#39;</span>] <span style=color:#75715e>// å…¬å…±æ¨¡å—
</span><span style=color:#75715e></span>    },
    <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> ..., <span style=color:#75715e>// æ‰€æœ‰è¾“å‡ºæ–‡ä»¶çš„ç›®æ ‡è·¯å¾„
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>publicPath</span><span style=color:#f92672>:</span> ..., <span style=color:#75715e>// è¾“å‡ºè§£ææ–‡ä»¶çš„ç›®å½•
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> ..., <span style=color:#75715e>// è¾“å‡ºæ–‡ä»¶
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>chunkFilename</span><span style=color:#f92672>:</span> ... <span style=color:#75715e>// é€šè¿‡å¼‚æ­¥è¯·æ±‚çš„æ–‡ä»¶
</span><span style=color:#75715e></span>    },
    <span style=color:#75715e>// æ’é™¤ä»¥ä¸‹å†…å®¹æ‰“åŒ…åˆ° bundleï¼Œå‡å°æ–‡ä»¶å¤§å°
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>external</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>jquery</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;jQuery&#39;</span>,
        <span style=color:#a6e22e>dialog</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;dialog&#39;</span>
    },
    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
        <span style=color:#75715e>/**
</span><span style=color:#75715e>         * é€šè¿‡å°†å…¬å…±æ¨¡å—æ‹†å‡ºæ¥ï¼Œæœ€ç»ˆåˆæˆçš„æ–‡ä»¶èƒ½å¤Ÿåœ¨æœ€å¼€å§‹çš„æ—¶å€™åŠ è½½ä¸€æ¬¡ï¼Œä¾¿å­˜åˆ°ç¼“å­˜ä¸­ä¾›åç»­ä½¿ç”¨ã€‚
</span><span style=color:#75715e>         * è¿™ä¸ªå¸¦æ¥é¡µé¢é€Ÿåº¦ä¸Šçš„æå‡ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šè¿…é€Ÿå°†å…¬å…±çš„ä»£ç ä»ç¼“å­˜ä¸­å–å‡ºæ¥ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è®¿é—®ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œå†å»åŠ è½½ä¸€ä¸ªæ›´å¤§çš„æ–‡ä»¶ã€‚
</span><span style=color:#75715e>         */</span>
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>webpack</span>.<span style=color:#a6e22e>optimize</span>.<span style=color:#a6e22e>CommonsChunkPlugin</span>({
            <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;vendor&#39;</span>]
        }),
        <span style=color:#75715e>/**
</span><span style=color:#75715e>         * DefinePlugin å…è®¸åˆ›å»ºä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ã€‚è¿™å¯èƒ½ä¼šå¯¹å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼çš„æ„å»ºå…è®¸ä¸åŒçš„è¡Œä¸ºéå¸¸æœ‰ç”¨ã€‚
</span><span style=color:#75715e>         */</span>
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>webpack</span>.<span style=color:#a6e22e>DefinePlugin</span>({
            <span style=color:#a6e22e>__VERSION__</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> Date().<span style=color:#a6e22e>getTime</span>()
        })
    ],
    <span style=color:#a6e22e>resolve</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>root</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>__dirname</span>,
        <span style=color:#a6e22e>extensions</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#e6db74>&#39;.js&#39;</span>, <span style=color:#e6db74>&#39;.vue&#39;</span>, <span style=color:#e6db74>&#39;.json&#39;</span>], <span style=color:#75715e>// è§£æç»„ä»¶çš„æ–‡ä»¶åç¼€ç™½åå•
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>alias</span><span style=color:#f92672>:</span> { ... } <span style=color:#75715e>// é…ç½®è·¯å¾„åˆ«å
</span><span style=color:#75715e></span>    },
    <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
        <span style=color:#75715e>// å„ä¸ªæ–‡ä»¶çš„loaders
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>loaders</span><span style=color:#f92672>:</span> [
            { <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.vue$/</span>, <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;vue-loader&#39;</span> },
            { <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.css$/</span>, <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;style-loader!css-loader&#39;</span> },
            { <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.jsx$/</span>, <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;babel-loader&#39;</span>, <span style=color:#a6e22e>include</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;app&#39;</span>)], <span style=color:#a6e22e>exclude</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/core/</span> },
            { <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.json$/</span>, <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;json&#39;</span> }
        ]
    },
    <span style=color:#a6e22e>vue</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>loaders</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>js</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;babel-loader&#39;</span>
        }
    }
})
</code></pre></div><h2 id=2-å°†gulpçš„åŠŸèƒ½ç§»åˆ°webpack1ä¸Šæ‰§è¡Œ>2. å°†<code>Gulp</code>çš„åŠŸèƒ½ç§»åˆ°<code>Webpack1</code>ä¸Šæ‰§è¡Œ<a hidden class=anchor aria-hidden=true href=#2-å°†gulpçš„åŠŸèƒ½ç§»åˆ°webpack1ä¸Šæ‰§è¡Œ>#</a></h2>
<h3 id=ä½¿ç”¨html-webpack-pluginæ’ä»¶æ„å»ºé¡¹ç›®çš„ä¸»htmlæ–‡ä»¶>ä½¿ç”¨<code>html-webpack-plugin</code>æ’ä»¶æ„å»ºé¡¹ç›®çš„ä¸»<code>.html</code>æ–‡ä»¶<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨html-webpack-pluginæ’ä»¶æ„å»ºé¡¹ç›®çš„ä¸»htmlæ–‡ä»¶>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>({
            <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;...&#39;</span>, <span style=color:#75715e>// è¾“å‡ºçš„è·¯å¾„
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;...&#39;</span>, <span style=color:#75715e>// æå–æºhtmlçš„è·¯å¾„
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>chunks</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;...&#39;</span>], <span style=color:#75715e>// éœ€è¦å¯¼å…¥çš„æ¨¡å—
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>inject</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>// æ˜¯å¦é™„åŠ åˆ°bodyåº•éƒ¨
</span><span style=color:#75715e></span>        })
    ]
}
</code></pre></div><h3 id=ä½¿ç”¨webpackoptimizeuglifyjspluginæ’ä»¶è¿›è¡Œjså‹ç¼©>ä½¿ç”¨<code>webpack.optimize.UglifyJsPlugin</code>æ’ä»¶è¿›è¡Œ<code>JS</code>å‹ç¼©<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨webpackoptimizeuglifyjspluginæ’ä»¶è¿›è¡Œjså‹ç¼©>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>webpack</span>.<span style=color:#a6e22e>optimize</span>.<span style=color:#a6e22e>UglifyJsPlugin</span>({
            <span style=color:#a6e22e>compress</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>warnings</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span> }
        })
    ]
}
</code></pre></div><h3 id=ä½¿ç”¨webpack-dev-serveræ¨¡å—æä¾›nodeæ­å»ºçš„å¼€å‘ç¯å¢ƒ>ä½¿ç”¨<code>webpack-dev-server</code>æ¨¡å—ï¼Œæä¾›<code>node</code>æ­å»ºçš„å¼€å‘ç¯å¢ƒ<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨webpack-dev-serveræ¨¡å—æä¾›nodeæ­å»ºçš„å¼€å‘ç¯å¢ƒ>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>devServer</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>clientLogLevel</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;warning&#39;</span>, <span style=color:#75715e>// è¾“å‡ºæ—¥å¿—çš„çº§åˆ«ï¼Œé…ç½®ä¸ºè­¦å‘Šçº§åˆ«ä»¥ä¸Šæ‰è¾“å‡º
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>inline</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// å¯åŠ¨ live reload
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>hot</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// å…è®¸å¯ç”¨çƒ­é‡è½½
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>compress</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// å¯¹æ‰€æœ‰é™æ€èµ„æºè¿›è¡Œgzipå‹ç¼©
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>open</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// é»˜è®¤åœ¨å¯åŠ¨æœ¬åœ°æœåŠ¡æ—¶æ‰“å¼€æµè§ˆå™¨
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>quiet</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// ç¦æ­¢è¾“å‡ºç¹æ‚çš„æ„å»ºæ—¥å¿—
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>host</span><span style=color:#f92672>:</span> ..., <span style=color:#75715e>// æœåŠ¡å¯åŠ¨çš„åŸŸå
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>port</span><span style=color:#f92672>:</span> ..., <span style=color:#75715e>// æœåŠ¡å¯åŠ¨çš„ç«¯å£
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>proxy</span><span style=color:#f92672>:</span> { ... }, <span style=color:#75715e>// httpä»£ç†é…ç½®
</span><span style=color:#75715e></span>        <span style=color:#75715e>/**
</span><span style=color:#75715e>         * è¿™ä¸ªé…ç½®å¸¸ç”¨äºè§£å†³spaåº”ç”¨h5è·¯ç”±æ¨¡å¼ä¸‹å°†æ‰€æœ‰404è·¯ç”±åŒ¹é…å›index.htmlçš„é—®é¢˜
</span><span style=color:#75715e>         * ç”±äºç”Ÿäº§ç¯å¢ƒä¸ºä¸»é¡µåŒ¹é…äº†ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„åˆ«åï¼Œå› æ­¤å¼€å‘ç¯å¢ƒä¹Ÿç…§æ¬åç«¯æœåŠ¡çš„é…ç½®
</span><span style=color:#75715e>         */</span>
        <span style=color:#a6e22e>historyApiFallback</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>rewrites</span><span style=color:#f92672>:</span> [{ <span style=color:#a6e22e>from</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/^\/admin/&#39;</span>, <span style=color:#a6e22e>to</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;...&#39;</span> }]
        }
    }
}
</code></pre></div><h3 id=è¸©å‘>è¸©å‘<a hidden class=anchor aria-hidden=true href=#è¸©å‘>#</a></h3>
<ol>
<li><code>webpack-dev-server@3.2.1 requires a peer of webpack^@4.0.0 but none is installed.</code>ï¼šè¿™ä¸¤ä¸ªæ¨¡å—ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œå›é€€åˆ°<code>webpack-dev-server@2</code>æˆåŠŸè¿è¡Œã€‚</li>
<li><code>Cannot resolve module 'fsevents' ...</code>ï¼šå°†å…¨å±€çš„<code>webpack</code>è°ƒç”¨æ”¹ä¸ºç›´æ¥ä»<code>node_modules/webpack</code>ä¸‹ç›´æ¥è°ƒç”¨ï¼Œè§£å†³äº†é—®é¢˜ï¼Œ<code>node node_modules/webpack/bin/webpack.js --config webpack.config.js</code>ã€‚</li>
<li><code>Cannot resolve module 'fs' ...</code>ï¼šé…ç½®<code>config.node.fs = 'empty'</code>ï¼Œä¸º<code>Webpack</code>æä¾›<code>node</code>åŸç”Ÿæ¨¡å—ï¼Œä½¿å…¶èƒ½åŠ è½½åˆ°è¿™ä¸ªå¯¹è±¡ã€‚</li>
<li>çƒ­é‡è½½åªå¯¹<code>.js</code>å’Œ<code>.css</code>åŠ<code>.vue</code>ä¸­çš„<code>&lt;style></code>å†…æ ·å¼ç”Ÿæ•ˆï¼Œå¯¹<code>.vue</code>æ–‡ä»¶ä¸­çš„<code>html</code>æ¨¡æ¿åŠ<code>js</code>å†…å®¹éƒ½ä¸ç”Ÿæ•ˆï¼Œä¼šæ‰“å°â€œæ¨¡å—ä»£ç å·²å‘ç”Ÿæ”¹å˜å¹¶é‡æ–°ç¼–è¯‘ï¼Œä½†çƒ­é‡è½½ä¸ç”Ÿæ•ˆï¼Œå¯èƒ½ä¼šå¯ç”¨å…¨å±€åˆ·æ–°çš„ç­–ç•¥â€ä¹‹ç±»çš„ä¿¡æ¯ï¼Œæš‚æ—¶æ²¡æœ‰è§£å†³ï¼Œåˆæ­¥åˆ¤æ–­æ˜¯ä½ç‰ˆæœ¬çš„<code>vue-hot-reload-api</code>å¯¹è¿™äº›éƒ¨åˆ†çš„å¤„ç†æœ‰é—®é¢˜ï¼Œæœ‰å¤§ç¥äº†è§£åŸç†å¯ä»¥åœ¨è¯„è®ºåŒºç§‘æ™®ä¸€å“ˆ=.=ã€‚</li>
</ol>
<h2 id=3-ä»webpack1å‡çº§åˆ°webpack3>3. ä»<code>Webpack1</code>å‡çº§åˆ°<code>Webpack3</code><a hidden class=anchor aria-hidden=true href=#3-ä»webpack1å‡çº§åˆ°webpack3>#</a></h2>
<p>ç”±äº<code>Webpack2</code>ä¸<code>Webpack3</code>å‡ ä¹å®Œå…¨å…¼å®¹ï¼Œåªæ˜¯æ¶‰åŠåˆ°ä¸€äº›å¢é‡çš„åŠŸèƒ½ï¼Œå› æ­¤é€‰æ‹©ç›´æ¥ä»<code>Webpack1</code>è¿ç§»åˆ°<code>Webapck3</code>ï¼Œå…ˆåœ¨é¡¹ç›®ä¸­å®‰è£…<code>Webpack3</code>ï¼Œç„¶åæ ¹æ®<code>Webpack2</code>æ–‡æ¡£ä¸­ã€Šä»<code>Webpack1</code>è¿ç§»ã€‹çš„ç« èŠ‚ï¼Œå¯¹é…ç½®é¡¹è¿›è¡Œæ›´æ”¹ï¼Œå‚è€ƒçš„æ–‡æ¡£æˆ³è¿™ä¸ªï¼šhttps://www.html.cn/doc/webpack2/guides/migrating/</p>
<p>è¿™æ¬¡å‡çº§æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ ¹æ®æ–‡æ¡£é…ç½®ç¨ä½œæ›´æ”¹å°±è·‘é€šäº†ã€‚æ¢³ç†ä¸€ä¸‹ç›®å‰ä¸ºæ­¢å®ç°çš„åŠŸèƒ½ï¼š</p>
<ol>
<li>æ–°çš„<code>Webpack</code>æ„å»ºä»£ç å·²ç»å®ç°äº†åŸæœ‰çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä¸‹é¢åˆ—ä¸¾æ–°å¢çš„åŠŸèƒ½ã€‚</li>
<li>ä½¿ç”¨<code>webpack-dev-server</code>ä½œä¸ºå¼€å‘æœåŠ¡å™¨ï¼Œå®ç°äº†ä¿å­˜æ—¶<code>live reload</code>çš„åŠŸèƒ½ã€‚</li>
<li>ä½¿ç”¨<code>http-proxy-middleware</code>æ’ä»¶ï¼Œå°†è¯·æ±‚ç›´æ¥ä»£ç†åˆ°æµ‹è¯•æœï¼Œè®©å¼€å‘ç¯å¢ƒè„±ç¦»äº†æœ¬åœ°éƒ¨ç½²çš„åç«¯æœåŠ¡ï¼Œå¤§å¤§é™ä½äº†å¼€å‘ç¯å¢ƒéƒ¨ç½²çš„æ—¶é—´æˆæœ¬ã€‚</li>
<li>æ–°å¢<code>friendly-errors-webpack-plugin</code>ï¼Œè¾“å‡ºå‹å¥½çš„æ„å»ºæ—¥å¿—ï¼Œæ‰“å°å‡ ä¸ªé‡è¦æ¨¡å—çš„å¼€å‘ç¯å¢ƒåœ°å€ï¼Œé…ç½®æ–¹é¢å®Œå…¨å‚è€ƒäº†<code>vue-cli@2</code>çš„é»˜è®¤é…ç½®ã€‚</li>
<li>æ–°å¢<code>postcss-loader</code>ï¼Œå¯¹cssæ·»åŠ å…¼å®¹å¤„ç†ï¼Œé…ç½®æ–¹é¢å®Œå…¨å‚è€ƒäº†<code>vue-cli@2</code>çš„é»˜è®¤é…ç½®ã€‚</li>
<li>ä½¿ç”¨<code>webpack.optimize.UglifyJsPlugin</code>å‹ç¼©jsä»£ç ã€‚</li>
</ol>
<p>å°è¯•è¿›è¡Œæ„å»ºï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼š</p>
<ul>
<li><code>npm run build</code>ï¼šçº¦<code>135s</code></li>
<li><code>npm run dev</code>ï¼šåˆæ¬¡æ„å»ºçº¦<code>58s</code>ï¼ŒæŒç»­æ„å»ºçº¦<code>30s</code></li>
</ul>
<p>é¡¹ç›®æ„å»ºæ—¶é—´è¿‡é•¿ï¼ˆç¬¬ä¸€æ¬¡æ‰“åŒ…æŠŠè‡ªå·±å“äº†ä¸€è·³&mldr;ï¼‰ï¼Œåªèƒ½ç»§ç»­å¯»æ±‚æ„å»ºé€Ÿåº¦ä¸Šçš„ä¼˜åŒ–</p>
<h2 id=4-åœ¨webpack3ä¸‹è¿›è¡Œæ„å»ºé€Ÿåº¦çš„ä¼˜åŒ–>4. åœ¨<code>Webpack3</code>ä¸‹è¿›è¡Œæ„å»ºé€Ÿåº¦çš„ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#4-åœ¨webpack3ä¸‹è¿›è¡Œæ„å»ºé€Ÿåº¦çš„ä¼˜åŒ–>#</a></h2>
<h3 id=ä½¿ç”¨webpack-jarvisç›‘æµ‹æ„å»ºæ€§èƒ½>ä½¿ç”¨<code>webpack-jarvis</code>ç›‘æµ‹æ„å»ºæ€§èƒ½<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨webpack-jarvisç›‘æµ‹æ„å»ºæ€§èƒ½>#</a></h3>
<p><code>webpack-jarvis</code>æ˜¯ä¸€ä¸ªå›¾å½¢åŒ–çš„webpackæ€§èƒ½ç›‘æµ‹å·¥å…·ï¼Œå®ƒé…ç½®ç®€ä¾¿ï¼Œå¯¹æ„å»ºè¿‡ç¨‹çš„æ—¶é—´å æ¯”ã€æ„å»ºç»“æœçš„è¯¦ç»†è®°å½•éƒ½æœ‰å…·ä½“çš„è¾“å‡º</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#75715e>// ç»è¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥åœ¨æœ¬åœ°3001ç«¯å£è¾“å‡ºæ„å»ºç»“æœè®°å½•
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Jarvis</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;webpack-jarvis&#39;</span>)
<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Jarvis</span>({
            <span style=color:#a6e22e>watchOnly</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
            <span style=color:#a6e22e>port</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3001</span>
        })
    ]
}
</code></pre></div><h3 id=ä½¿ç”¨happypack>ä½¿ç”¨<code>happypack</code><a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨happypack>#</a></h3>
<p>å…ˆæ ¹æ®ç½‘ä¸Šæœåˆ°çš„æ–‡ç« ï¼Œåšä¸€äº›ç®€å•çš„ä¼˜åŒ–ï¼Œå¦‚ä½¿ç”¨<code>happypack</code>ï¼Œè¿™ä¸ªæ¨¡å—é€šè¿‡å¤šè¿›ç¨‹æ¨¡å‹ï¼Œæ¥åŠ é€Ÿä»£ç æ„å»ºï¼Œä½†æ˜¯ä½¿ç”¨ä¹‹åè²Œä¼¼æ²¡æœ‰å¤ªæ˜æ˜¾çš„ç»“æœï¼Œæ„å»ºæ—¶é—´å¤§æ¦‚å‡å°‘äº†å‡ ç§’å§&mldr;æš‚æ—¶è¿˜ä¸å¤ªæ‡‚è¿™ä¸ªæ¨¡å—å¯¹ä¼˜åŒ–ä»€ä¹ˆåœºæ™¯çš„æ•ˆæœæ¯”è¾ƒæ˜æ˜¾ï¼Œä¹‹å‰æœ‰çœ‹åˆ°ä¸€ç¯‡è®²è§£<code>happypack</code>åŸç†çš„æ–‡ç« ï¼Œä½†è¿˜æ²¡ç»†çœ‹ï¼Œæœ‰å…´è¶£å°ä¼™ä¼´å¯ä»¥ç ”ç©¶ä¸€ä¸‹ï¼Œè¦æ˜¯èƒ½åœ¨è¯„è®ºé‡Œç®€æ´æ˜äº†çš„ç»™æ¸£æ¸£æ¥¼ä¸»è§£é‡Šä¸€ä¸‹å°±æ›´å¥½äº†TUTï¼šhttp://taobaofed.org/blog/2016/12/08/happypack-source-code-analysis/</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>HappyPack</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;happypack&#39;</span>)
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>os</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;os&#39;</span>)
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>happyThreadPool</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>HappyPack</span>.<span style=color:#a6e22e>ThreadPool</span>({ <span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>cpus</span>().<span style=color:#a6e22e>length</span> })
<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HappyPack</span>({
            <span style=color:#75715e>// happypackçš„idï¼Œåœ¨è°ƒç”¨æ—¶éœ€è¦å£°æ˜ï¼Œè‹¥éœ€è¦ç¼–è¯‘å…¶ä»–ç±»å‹çš„æ–‡ä»¶éœ€è¦å†å£°æ˜ä¸€ä¸ªhappypack
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;js&#39;</span>,
            <span style=color:#75715e>// cacheDirectoryï¼šè®¾ç½®åï¼Œå°†å°½é‡åœ¨babelç¼–è¯‘æ—¶ä½¿ç”¨ç¼“å­˜åŠ è½½å™¨çš„ç»“æœï¼Œé¿å…é‡æ–°èµ°ä¸€ébabelçš„é«˜æ˜‚ä»£ä»·
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>use</span><span style=color:#f92672>:</span> [{ <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;babel-loader&#39;</span>, <span style=color:#a6e22e>cacheDirectory</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }],
            <span style=color:#75715e>// æ ¹æ®cpuçš„æ ¸å¿ƒæ•°åˆ¤æ–­éœ€è¦æ‹†åˆ†å¤šå°‘ä¸ªè¿›ç¨‹æ± 
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>threadPool</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>happyThreadPool</span>,
            <span style=color:#75715e>// æ˜¯å¦è¾“å‡ºç¼–è¯‘è¿‡ç¨‹çš„æ—¥å¿—
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>verbose</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
        })
    ]
}
</code></pre></div><p>åšå®Œè¿™ä¸€æ­¥åï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼š</p>
<ul>
<li><code>npm run build</code>ï¼šçº¦<code>130s</code></li>
<li><code>npm run dev</code>ï¼šåˆæ¬¡æ„å»ºçº¦<code>60s</code>ï¼ŒæŒç»­æ„å»ºçº¦<code>30s</code></li>
</ul>
<h3 id=devtoolé…ç½®ä¸ºcheap-module-eval-source-map><code>devtool</code>é…ç½®ä¸º<code>cheap-module-eval-source-map</code><a hidden class=anchor aria-hidden=true href=#devtoolé…ç½®ä¸ºcheap-module-eval-source-map>#</a></h3>
<p><code>devtool</code>é€‰é¡¹å¯ç”¨<code>cheap-module-eval-source-map</code>æ¨¡å¼ï¼š<code>vue-cli@2</code>é»˜è®¤é…ç½®ä¸ºè¿™ç§æ¨¡å¼ï¼Œ<code>cheap</code>ä»£è¡¨åœ¨è¾“å‡º<code>source-map</code>æ—¶çœç•¥åˆ—ä¿¡æ¯ï¼›<code>module</code>è¡¨ç¤ºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¯ç”¨å¦‚<code>babel-loader</code>è¿™æ ·çš„é¢„ç¼–è¯‘å™¨ï¼Œä½¿å¾—è°ƒè¯•æ—¶å¯ä»¥ç›´æ¥çœ‹åˆ°æœªç»ç¼–è¯‘çš„æºä»£ç ï¼›<code>eval</code>è¡¨ç¤ºå¯ç”¨<code>eval</code>æ¨¡å¼ç¼–è¯‘ï¼Œè¯¥æ¨¡å¼ç›´æ¥ä½¿ç”¨<code>eval</code>å‡½æ•°æ‰§è¡Œç¼–è¯‘åæ¨¡å—çš„å­—ç¬¦ä¸²ï¼Œå‡å°‘äº†å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„ä»£ç æ–‡ä»¶è¿™ä¸ªæ­¥éª¤ï¼ŒåŠ å¿«äº†é¡¹ç›®å¼€å‘ä¸­é‡å»ºçš„é€Ÿåº¦ï¼›<code>source-map</code>è¡¨ç¤ºè¾“å‡ºæºä»£ç çš„æ˜ å°„è¡¨ï¼Œä½¿å¾—å¼€å‘æ—¶å¯ä»¥ç›´æ¥æŠŠé”™è¯¯å®šä½åˆ°æºä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<p>åšå®Œè¿™ä¸€æ­¥åï¼Œæ•ˆæœå¹¶ä¸æ˜æ˜¾=.=ï¼ˆç›¸æ¯”åŸæ¥çš„<code>source-map</code>ï¼‰ï¼Œå¤§æ¦‚å‡å°‘äº†å‡ ç§’ï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼š</p>
<ul>
<li><code>npm run build</code>ï¼šçº¦<code>130s</code></li>
<li><code>npm run dev</code>ï¼šåˆæ¬¡æ„å»ºçº¦<code>58s</code>ï¼ŒæŒç»­æ„å»ºçº¦<code>30s</code></li>
</ul>
<h3 id=ä½¿ç”¨html-webpack-plugin-for-multihtmlæå‡å¤šå…¥å£é¡¹ç›®é‡å»ºé€Ÿåº¦>ä½¿ç”¨<code>html-webpack-plugin-for-multihtml</code>æå‡å¤šå…¥å£é¡¹ç›®é‡å»ºé€Ÿåº¦<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨html-webpack-plugin-for-multihtmlæå‡å¤šå…¥å£é¡¹ç›®é‡å»ºé€Ÿåº¦>#</a></h3>
<p>é‡å»ºä¸€æ¬¡ç«Ÿç„¶éœ€è¦<code>30s</code>ï¼å„ç§æœç´¢æ‰¾åˆ°äº†<code>html-webpack-plugin</code>çš„ä¸€æ¡<code>issue</code>ï¼Œå‘ç°<code>html-webpack-plugin@2</code>åœ¨æ„å»ºå¤šå…¥å£åº”ç”¨æ—¶é€Ÿåº¦ç¡®å®æœ‰æ˜æ˜¾å˜æ…¢çš„æƒ…å†µï¼ŒåŸå› æ˜¯æ²¡æœ‰æˆåŠŸçš„å¯¹æ„å»ºå†…å®¹è¿›è¡Œç¼“å­˜ï¼Œä½¿æ¯æ¬¡é‡å»ºéƒ½é‡æ–°ç¼–è¯‘æ‰€æœ‰ä»£ç ã€‚ä½œè€…ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨è¿™ä¸ªæ¨¡å—çš„ä¸€ä¸ªåˆ†æ”¯é¡¹ç›®ï¼ˆæ˜¯ç”±ä½œè€…æœ¬äºº<code>fork</code>åŸé¡¹ç›®å¹¶é’ˆå¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œä¿®å¤çš„é¡¹ç›®ï¼‰<code>html-webpack-plugin-for-multihtml</code>ï¼Œç”¨æ³•ä¸<code>html-webpack-plugin</code>å®Œå…¨ç›¸åŒï¼Œä½¿ç”¨ä¹‹åé‡å»ºä»…éœ€<code>1s</code>å·¦å³ã€‚</p>
<p>åšå®Œè¿™ä¸€æ­¥åï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼š</p>
<ul>
<li><code>npm run build</code>ï¼šçº¦<code>130s</code></li>
<li><code>npm run dev</code>ï¼šåˆæ¬¡æ„å»ºçº¦<code>58s</code>ï¼ŒæŒç»­æ„å»ºçº¦<code>1s</code></li>
</ul>
<h3 id=ä½¿ç”¨webpackdllpluginæå–å…¬å…±æ¨¡å—>ä½¿ç”¨<code>webpack.DllPlugin</code>æå–å…¬å…±æ¨¡å—<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨webpackdllpluginæå–å…¬å…±æ¨¡å—>#</a></h3>
<p>åœ¨è¾“å‡ºç»“æœä¸­æ‰¾åˆ°äº†ä¸å°‘è¾ƒå¤§çš„ä¾èµ–åŒ…ï¼Œå¦‚<code>Vue</code>çš„æ ¸å¿ƒåº“ã€<code>lodash</code>ã€<code>echarts</code>ç­‰ç­‰ï¼Œè¿˜æœ‰ä¸€äº›ä¸å¸Œæœ›è¢«æ‰“åŒ…çš„é™æ€èµ„æºï¼Œæƒ³åŠæ³•é¿å…æ¯æ¬¡éƒ½ç¼–è¯‘è¿™äº›å†…å®¹ï¼Œæå‡ç¼–è¯‘é€Ÿåº¦ï¼Œæ‰€ä»¥æ‰¾åˆ°äº†è¿™ä¸ªæ’ä»¶ã€‚</p>
<p><code>webpack.DllPlugin</code>è¿™ä¸ªæ’ä»¶æ˜¯æ¥æºäº<code>Windows</code>ç³»ç»Ÿçš„<code>.dll</code>æ–‡ä»¶ï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰çš„ç”¨æ³•ï¼šé¦–å…ˆé€šè¿‡<code>DllPlugin</code>æ¨¡å—æ„å»ºå‡ºä¸€ä¸ªåŒ…å«å…¬å…±æ¨¡å—çš„åŒ…å’Œä¸€ä¸ªæ˜ å°„è¡¨ï¼Œå†é€šè¿‡<code>DllReferencePlugin</code>æ¨¡å—é€šè¿‡æ˜ å°„è¡¨ç»™æ¯ä¸ªæ¨¡å—å…³è”å¯¹åº”çš„ä¾èµ–ï¼Œè¿™æ ·å¯ä»¥å¯¹è¿™äº›å…¬å…±æ¨¡å—è¿›è¡Œé¢„å…ˆæ‰“åŒ…ï¼Œä»¥åæ„å»ºçš„æ—¶å€™å°±ä¸éœ€è¦å¤„ç†è¿™äº›æ¨¡å—ï¼Œå‡å°‘æ‰“åŒ…æ—¶é—´ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#75715e>// webpack.dll.conf.js
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>webpack</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;webpack&#39;</span>)
<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>vendor</span><span style=color:#f92672>:</span> [...]
    },
    <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>resolve</span>(<span style=color:#e6db74>&#39;build/development&#39;</span>),
        <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;[name].dll.js&#39;</span>,
        <span style=color:#a6e22e>library</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;[name]_library&#39;</span>
    },
    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>webpack</span>.<span style=color:#a6e22e>optimize</span>.<span style=color:#a6e22e>UglifyJsPlugin</span>(),
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>webpack</span>.<span style=color:#a6e22e>DllPlugin</span>({
            <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>resolve</span>(<span style=color:#e6db74>&#39;build/development/[name]-manifest.json&#39;</span>), <span style=color:#75715e>// ç”Ÿæˆmanifestæ–‡ä»¶è¾“å‡ºçš„ä½ç½®å’Œæ–‡ä»¶åç§°
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;[name]-library&#39;</span>, <span style=color:#75715e>// ä¸output.libraryæ˜¯ä¸€æ ·çš„ï¼Œå¯¹åº”manifest.jsonæ–‡ä»¶ä¸­nameå­—æ®µçš„å€¼ï¼Œé˜²æ­¢å…¨å±€å˜é‡å†²çª
</span><span style=color:#75715e></span>            <span style=color:#a6e22e>context</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>__dirname</span>
        })
    ]
}
<span style=color:#75715e>// webpack.base.conf.js
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>webpack</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;webpack&#39;</span>)
<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
        <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>webpack</span>.<span style=color:#a6e22e>DllReferencePlugin</span>({
            <span style=color:#a6e22e>context</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>__dirname</span>,
            <span style=color:#a6e22e>manifest</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;../build/development/vendor-manifest.json&#39;</span>) <span style=color:#75715e>// è®©webpackä»æ˜ å°„è¡¨è·å–ä½¿ç”¨çš„ä¾èµ–
</span><span style=color:#75715e></span>        })
    ]
}
</code></pre></div><p>æ‰“åŒ…å‡ºæ¥ä¹‹åè¿˜éœ€è¦åœ¨htmlæ–‡ä»¶ä¸­å¼•å…¥å…¬å…±åº“<code>vendor.dll.js</code>æ–‡ä»¶</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>html</span>&gt;
    &lt;<span style=color:#f92672>head</span>&gt;&lt;/<span style=color:#f92672>head</span>&gt;
    &lt;<span style=color:#f92672>body</span>&gt;
        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;app&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
        &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/build/development/vendor.dll.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
        <span style=color:#75715e>&lt;!-- å…¶ä»–JSåº”è¯¥æ³¨å…¥åˆ°dllçš„åé¢ï¼Œç¡®ä¿èƒ½å¤Ÿå¼•ç”¨åˆ°å…¬å…±åº“çš„å†…å®¹ --&gt;</span>
    &lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><p>åšå®Œè¿™ä¸€æ­¥åï¼Œè¾“å‡ºæ„å»ºæ—¶é—´è®°å½•ï¼Œå‘ç°æ„å»ºæ•ˆç‡æœ‰äº†æ˜æ˜¾çš„æé«˜ï¼š</p>
<ul>
<li><code>npm run dll</code>ï¼šçº¦<code>25s</code></li>
<li><code>npm run build</code>ï¼šçº¦<code>70s</code></li>
<li><code>npm run dev</code>ï¼šåˆæ¬¡æ„å»ºçº¦<code>55s</code>ï¼ŒæŒç»­æ„å»ºçº¦<code>1s</code></li>
</ul>
<h2 id=5-åè®°>5. åè®°<a hidden class=anchor aria-hidden=true href=#5-åè®°>#</a></h2>
<p>ä¼˜åŒ–åˆ°è¿™é‡Œå°±å·®ä¸å¤šç»“æŸï¼Œè¿™æ¬¡çš„ä¼˜åŒ–ä¸ºæ—§é¡¹ç›®æä¾›äº†æ–°ä¸€ä»£<code>spa</code>é¡¹ç›®åº”æœ‰çš„ä¸€äº›åŠŸèƒ½ï¼Œæ­å»ºäº†æ›´ç°ä»£çš„æœ¬åœ°å¼€å‘ç¯å¢ƒã€‚ç”±äºæœ¬æ–‡ç¯‡å¹…æœ‰ç‚¹å¤ªé•¿ï¼Œå®Œæ•´çš„é…ç½®å°±ä¸¢åœ¨<a href=https://github.com/yyj08070631/yyj/blob/master/Vue/Vue1.0+Webpack1+Gulpé¡¹ç›®å‡çº§æ„å»ºæ–¹æ¡ˆçš„è¸©å‘è·¯-å®Œæ•´é…ç½®.md target=_blank>å¦ä¸€ç¯‡æ–‡ç« </a>é‡Œã€‚</p>
<h2 id=6-qa>6. Q&A<a hidden class=anchor aria-hidden=true href=#6-qa>#</a></h2>
<p>Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥å‡çº§åˆ°<code>Webpack4</code>ï¼Ÿ</p>
<p>A: <code>Webpack4</code>åªæ”¯æŒ<code>vue-loader@15</code>ä»¥ä¸Šç‰ˆæœ¬ï¼Œè€Œè¿™ä¸ªç‰ˆæœ¬å·²ç»æ— æ³•è§£æ<code>Vue1</code>çš„æ–‡ä»¶ã€‚</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://geekhouse.top/tags/engineering/>Engineering</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://geekhouse.top/posts/algorithm_sort/>
<span class=title>Â« Prev Page</span>
<br>
<span>æ’åºç®—æ³•</span>
</a>
</nav>
</footer>
<div id=gitalk-container style=width:100%></div>
<link rel=stylesheet href=https://unpkg.com/gitalk/dist/gitalk.css>
<script src=https://unpkg.com/gitalk/dist/gitalk.min.js></script>
<script src=https://rawgit.com/qhh0205/78e9e0b1f3114db6737f3ed8cdd51d3a/raw/3894c5be5aa2378336b1f5ee0f296fa0b22d06e9/md5.min.js></script>
<script>const gitalk=new Gitalk({clientID:'9e2cdfca1be7d4afa5fd',clientSecret:'92f0c9b3c70a6fa21595951a9f18a6e74d4f5102',repo:'gt1',owner:'yyj08070631',admin:['yyj08070631'],id:md5(location.pathname),distractionFreeMode:!1,body:location.href,proxy:'https://shielded-brushlands-08810.herokuapp.com/https://github.com/login/oauth/access_token'});(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('gitalk-container').innerHTML='Gitalk comments not available by default when the website is previewed locally.';return}gitalk.render('gitalk-container')})()</script>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://geekhouse.top/>GeekHouse | ä¸è‚¥çš„è‚¥ç¾Š</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>